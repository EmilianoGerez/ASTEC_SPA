function ClientCtrl(e,r,t,n){function i(r,t){e.search.query({id:null,number:r,lastName:t},function(e){o.clientList=e})}var a,o=this;o.clientModel={},o.clientSearch={},o.errorInfo={msg:null,data:null},o.successInfo={msg:null,data:null},o.create=function(r){var t=new e.api(o.clientModel);t.$save(function(e){angular.copy(a,o.clientModel),r.$setPristine(),r.$setUntouched(),o.errorInfo.msg=null,o.successInfo.msg="Cliente creado con exito",o.successInfo.data=e},function(e){o.successInfo.msg=null,o.errorInfo.msg=e.data})},o.search=function(){o.clientSearch.number?(o.searchWord=o.clientSearch.number,i(o.clientSearch.number,"null")):o.clientSearch.lastName&&(o.searchWord=o.clientSearch.lastName,i("null",o.clientSearch.lastName))},o.remove=function(e){var r=t.confirm("Quieres eliminar a "+e.firstName+" "+e.lastName+" ?");r&&(e.$remove(),o.clientList=o.clientList.filter(function(r){return r._id!==e._id}))},o.findOne=function(){e.api.get({id:n.id},function(e){o.clientModel=e})},o.update=function(e){o.clientModel.$update(function(r){e.$setPristine(),e.$setUntouched(),o.errorInfo.msg=null,o.successInfo.msg="Cliente editado con exito",o.successInfo.data=r},function(e){o.successInfo.msg=null,o.errorInfo.msg=e.data})}}function mainCtrl(e,r,t,n,i){var a=this;n.$on("$stateChangeStart",function(){switch(t.$$path){case"/dashboard":a.currentSection="Dashboard";break;case"/clients":a.currentSection="Clientes";break;case"/orders":a.currentSection="Ordenes";break;case"/users":a.currentSection="Usuarios"}}),a.getCurrentUser=function(){a.currentUserData=e.getCurrentUserData()}(),a.logout=function(){a.currentUserData={},e.logout()},a.getOrders=function(){var e=a.currentUserData;a.isAdmin="Admin"==e.role,r.api.query(function(r){a.orders=r.filter(function(r){return a.isAdmin?"Asignada"==r.status:"Asignada"==r.status&&r.tech.id==e._id}),a.ordersComplete=r.filter(function(e){return"Completada"==e.status})})},a.remove=function(e){var r=i.confirm("Quieres eliminar la orden N° #"+e.number+" ?");r&&e.$remove(function(){"Asignada"===e.status?a.orders=a.orders.filter(function(r){return r._id!==e._id}):a.ordersComplete=a.ordersComplete.filter(function(r){return r._id!==e._id})})}}function OrderCtrl(e,r,t,n,i,a){function o(e,t){r.search.query({id:null,number:e,lastName:t},function(e){u.clientList=e})}function s(r,t){e.search.query({id:null,number:r,lastName:t},function(e){u.orderList=e})}var u=this;u.orderModel={},u.orderSearch={},u.errorInfo={msg:null,data:null},u.successInfo={msg:null,data:null},u.solvedOpt=["No","Si"],u.orderStatus=["Cancelada","Asignada","Completada"],u.selectedTech="",u.yearsRange=[],u.selectedYear=(new Date).getFullYear(),u.startMonth,u.addEndMonth,u.endMonth,u.orderListRange=[];var l=[];l.push(u.selectedYear);for(var d=1;30>d;d++)l.push(u.selectedYear-d);u.yearsRange=l,u.create=function(r){u.orderModel.client=u.clientData._id,u.orderModel.tech={id:u.selectedTech._id,firstName:u.selectedTech.firstName,lastName:u.selectedTech.lastName};var t=new e.api(u.orderModel);t.$save(function(e){u.orderModel={},u.clientData=null,u.clientSearch={},u.clientList=null,r.$setPristine(),r.$setUntouched(),u.errorInfo.msg=null,u.successInfo.msg="Orden creada con exito",u.successInfo.data=e},function(e){u.successInfo.msg=null,u.errorInfo.msg=e.data})},u.searchClient=function(){u.clientSearch.number?(u.searchWord=u.clientSearch.number,o(u.clientSearch.number,"null")):u.clientSearch.lastName&&(u.searchWord=u.clientSearch.lastName,o("null",u.clientSearch.lastName))},u.searchOrder=function(){u.orderSearch.number?(u.searchWord=u.orderSearch.number,s(u.orderSearch.number,"null")):u.orderSearch.lastName&&(u.searchWord=u.orderSearch.lastName,s("null",u.orderSearch.lastName))},u.remove=function(e){var r=i.confirm("Quieres eliminar la orden N° #"+e.number+" ?");r&&(e.$remove(),u.orderList=u.orderList.filter(function(r){return r._id!==e._id}))},u.findOne=function(r){e.api.get({id:a.id},function(e){u.orderModel=e,r&&(u.selectedTech=u.users.filter(function(e){return e._id===u.orderModel.tech.id}),u.selectedTech=u.selectedTech[0])})},u.update=function(e){u.orderModel.tech={id:u.selectedTech._id,firstName:u.selectedTech.firstName,lastName:u.selectedTech.lastName},u.orderModel.$update(function(r){e.$setPristine(),e.$setUntouched(),u.errorInfo.msg=null,u.successInfo.msg="Orden editada con éxito",u.successInfo.data=r},function(e){u.successInfo.msg=null,u.errorInfo.msg=e.data})},u.getAllUsers=function(){t.api.query(function(e){u.users=e.filter(function(e){return"Tech"===e.role})})},u.getOrders=function(){u.ordersLoading=!0;var r=null;u.orderMessage="",u.orderListRange=[],u.addEndMonth&&(r=u.endMonth),e.findOrders(u.selectedYear,u.startMonth,r).then(function(e){u.ordersLoading=!1,u.orderListRange=e.data,0==e.data.length&&(u.orderMessage="No se encontraron ordenes")},function(e){u.orderMessage="Se ha producido un error",console.log(e)})}}function dlKeyCode(){return{restrict:"A",link:function(e,r,t){r.bind("keypress",function(r){var n=r.which||r.keyCode;n==t.code&&e.$apply(function(){e.$eval(t.dlKeyCode,{$event:r})})})}}}function UserServ(e,r,t,n){this.getCurrentUserData=function(){var t=e.get("jwt");if(t){var n=r.decodeToken(t);return n}return!1},this.isAdmin=function(){var e=this.getCurrentUserData();return"Admin"==e.role},this.logout=function(){var r=this.getCurrentUserData();n.logout.get({id:r._id},function(){e.remove("jwt"),t.location.href="/"})}}var appConfiguration=function(){var e="main",r=["ngResource","ui.router","angular-jwt","angular-storage","ngMessages"],t=function(r,t){angular.module(r,t||[]),angular.module(e).requires.push(r)};return{appName:e,appDependencies:r,registerModule:t}}();angular.module(appConfiguration.appName,appConfiguration.appDependencies),appConfiguration.registerModule("client"),appConfiguration.registerModule("order"),appConfiguration.registerModule("user"),angular.module("client").config(["$stateProvider",function(e){e.state("clientPanel",{url:"/clients",views:{"private":{templateUrl:"modules/client/views/client-panel.client.view.html"}},data:{requiresLogin:!0,requiresAdmin:!0}}).state("editClient",{url:"/clients/:id/edit",views:{"private":{templateUrl:"modules/client/views/edit-client.client.view.html"}},data:{requiresLogin:!0,requiresAdmin:!0}})}]),angular.module("client").controller("ClientCtrl",["Clients","$http","$window","$stateParams",ClientCtrl]),angular.module("client").factory("Clients",["$resource",function(e){var r=e("api/clients/:id",{id:"@_id"},{update:{method:"PUT"}}),t=e("api/clients/:id/search/:number/:lastName",{id:"@_id",number:"number",lastName:"lastName"});return{api:r,search:t}}]),angular.module("main").config(["$stateProvider","$locationProvider","$urlRouterProvider",function(e,r,t){t.otherwise("/"),e.state("home",{url:"/",views:{"public":{templateUrl:"modules/main/views/home.client.view.html"}},data:{requiresLogin:!1}}).state("dashboard",{url:"/dashboard",views:{"private":{templateUrl:"modules/main/views/dashboard.client.view.html"}},data:{requiresLogin:!0}})}]),angular.module("main").controller("mainCtrl",["UserServ","Orders","$location","$rootScope","$window",mainCtrl]),angular.module("order").config(["$stateProvider",function(e){e.state("orderPanel",{url:"/orders",views:{"private":{templateUrl:"modules/order/views/order-panel.client.view.html"}},data:{requiresLogin:!0,requiresAdmin:!0}}).state("editorder",{url:"/orders/:id/edit",views:{"private":{templateUrl:"modules/order/views/edit-order.client.view.html"}},data:{requiresLogin:!0}}).state("orderDetail",{url:"/orders/:id",views:{"private":{templateUrl:"modules/order/views/order-detail.client.view.html"}},data:{requiresLogin:!0}})}]),angular.module("order").controller("OrderCtrl",["Orders","Clients","Users","$http","$window","$stateParams",OrderCtrl]),angular.module("order").directive("dlKeyCode",dlKeyCode),angular.module("order").factory("Orders",["$resource","$http",function(e,r){function t(e,t,n){var i={method:"GET",url:"api/orders/vieworders/"+e+"/month/"+t+"/"+n};return r(i)}var n=e("api/orders/:id",{id:"@_id"},{update:{method:"PUT"}}),i=e("api/orders/:id/search/:number/:lastName",{id:"@_id",number:"number",lastName:"lastName"});return{api:n,search:i,findOrders:t}}]),angular.module("user").config(["$stateProvider","jwtInterceptorProvider","$httpProvider",function(e,r,t){e.state("signup",{url:"/signup",views:{"public":{templateUrl:"modules/user/views/signup.client.view.html"}},data:{requiresLogin:!1}}).state("signin",{url:"/signin",views:{"public":{templateUrl:"modules/user/views/signin.client.view.html"}},data:{requiresLogin:!1}}).state("userList",{url:"/users",views:{"private":{templateUrl:"modules/user/views/user-list.client.view.html"}},templateUrl:"modules/user/views/user-list.client.view.html",data:{requiresLogin:!0,requiresAdmin:!0}}).state("editUser",{url:"/users/:id/edit",views:{"private":{templateUrl:"modules/user/views/user-edit.client.view.html"}},data:{requiresLogin:!0,requiresAdmin:!0}}),r.tokenGetter=["jwtHelper","$http","store","$state",function(e,r,t,n){var i=t.get("jwt");try{return e.isTokenExpired(i)?r({url:"http://skynetweb.com.ar/api/users/refresh",skipAuthorization:!0,method:"POST",data:{token:i}}).then(function(e){var r=e.data.token;return t.set("jwt",r),r},function(e){return t.remove("jwt"),n.go("signin"),!1}):i}catch(a){return t.remove("jwt"),!1}}],t.interceptors.push("jwtInterceptor")}]).run(["$rootScope","$window","store","$location","UserServ",function(e,r,t,n,i){e.$on("$stateChangeStart",function(e,r){if(r.data&&r.data.requiresLogin){if(!t.get("jwt"))return n.path("/signin");if(r.data.requiresAdmin&&!i.isAdmin())return e.preventDefault(),n.path("/dashboard").replace()}})}]),angular.module("user").controller("UserController",["$window","Users","UserServ","$http","store","jwtHelper","$stateParams","$state",function(e,r,t,n,i,a,o,s){var u=this;u.user={},u.errorInfo={},u.publicSignup=function(){var e=new r.api(u.user);e.$save(function(e){i.set("jwt",e.token),s.go("dashboard")},function(e){u.errorInfo=e.data})},u.signup=function(){u.user.role?(u.user.code="yb9b637i2v",u.user.role="Admin"):(u.user.code="dw77yee18u",u.user.role="Tech");var e=new r.api(u.user);e.$save(function(e){u.users.push(e.data),u.user={}},function(e){u.errorInfo=e.data})},u.signin=function(){var e=new r.signin(u.user);e.$save(function(e){i.set("jwt",e.token),s.go("dashboard")},function(e){u.errorInfo=e.data})},u.getAll=function(){r.api.query(function(e){u.users=e.filter(function(e){return e._id!==u.currentUser._id})})},u.getOne=function(){r.api.get({id:o.id},function(e){u.user=e})},u.getCurrentUser=function(){u.currentUser=t.getCurrentUserData()},u.update=function(){u.user.$update(function(e){s.go("userList")},function(e){u.errorInfo=e.data})},u.remove=function(r){var t=e.confirm("Quieres eliminar el usuario "+r.firstName+" "+r.lastName+" ?");t&&(r.$remove(),u.users=u.users.filter(function(e){return e._id!==r._id}))}}]),angular.module("user").directive("compareTo",[function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(e,r,t,n){n.$validators.compareTo=function(r){return r==e.otherModelValue},e.$watch("otherModelValue",function(){n.$validate()})}}}]),angular.module("user").directive("recordAvailabilityValidator",["$http","Users",function(e,r){return{require:"ngModel",link:function(e,t,n,i){function a(e){i.$setValidity("recordLoading",!e)}function o(e){i.$setValidity("recordAvailable",e)}i.$parsers.push(function(e){if(e&&0!==e.length){a(!0),o(!1);var t=r.search.get({email:e},function(){null===t.data&&(a(!1),o(!0))});return e}})}}}]),angular.module("user").service("UserServ",["store","jwtHelper","$window","Users",UserServ]),angular.module("user").factory("Users",["$resource",function(e){var r=e("api/users/:id",{id:"@_id"},{update:{method:"PUT"}}),t=e("api/users/signin"),n=e("api/users/logout/:id",{id:"@_id"}),i=e("api/users/search/:email",{email:"@email"});return{api:r,signin:t,logout:n,search:i}}]),angular.module("main").directive("ngEnter",function(){return function(e,r,t){r.bind("keydown keypress",function(r){13===r.which&&(e.$apply(function(){e.$eval(t.ngEnter,{event:r})}),r.preventDefault())})}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsaWVudC9jb250cm9sbGVycy9jbGllbnQuY2xpZW50LmNvbnRyb2xsZXIuanMiLCJtYWluL2NvbnRyb2xsZXJzL21haW4uY2xpZW50LmNvbnRyb2xsZXIuanMiLCJvcmRlci9jb250cm9sbGVycy9vcmRlci5jbGllbnQuY29udHJvbGxlci5qcyIsIm9yZGVyL2RpcmVjdGl2ZXMvb3JkZXIuZGlyZWN0aXZlcy5qcyIsInVzZXIvc2VydmljZXMvdXNlci1zZXJ2LmNsaWVudC5zZXJ2aWNlLmpzIiwiY29uZmlnLWFwcC5qcyIsIm1haW4tYXBwLmpzIiwiY2xpZW50L2NsaWVudC5jbGllbnQucmVnaXN0ZXIuanMiLCJvcmRlci9vcmRlci5jbGllbnQucmVnaXN0ZXIuanMiLCJ1c2VyL3VzZXIuY2xpZW50LnJlZ2lzdGVyLmpzIiwiY2xpZW50L2NvbmZpZy9jbGllbnQuY2xpZW50LnJvdXRlcy5qcyIsImNsaWVudC9zZXJ2aWNlcy9jbGllbnQuY2xpZW50LnNlcnZpY2UuanMiLCJtYWluL2NvbmZpZy9tYWluLmNsaWVudC5yb3V0ZXMuanMiLCJvcmRlci9jb25maWcvb3JkZXIuY2xpZW50LnJvdXRlcy5qcyIsIm9yZGVyL3NlcnZpY2VzL29yZGVyLmNsaWVudC5zZXJ2aWNlLmpzIiwidXNlci9jb25maWcvdXNlci5jbGllbnQucm91dGVzLmpzIiwidXNlci9jb250cm9sbGVycy91c2VyLmNsaWVudC5jb250cm9sbGVyLmpzIiwidXNlci9zZXJ2aWNlcy91c2VyLmNsaWVudC5zZXJ2aWNlLmpzIiwibWFpbi9kaXJlY3RpdmVzL25nRW50ZXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbIkNsaWVudEN0cmwiLCJDbGllbnRzIiwiJGh0dHAiLCIkd2luZG93IiwiJHN0YXRlUGFyYW1zIiwiZ2V0Q2xpZW50IiwibnVtYmVyIiwibGFzdE5hbWUiLCJzZWFyY2giLCJxdWVyeSIsImlkIiwicmVzcG9uc2UiLCJ2bSIsImNsaWVudExpc3QiLCJtYXN0ZXJNb2RlbCIsInRoaXMiLCJjbGllbnRNb2RlbCIsImNsaWVudFNlYXJjaCIsImVycm9ySW5mbyIsIm1zZyIsImRhdGEiLCJzdWNjZXNzSW5mbyIsImNyZWF0ZSIsImZvcm0iLCJuZXdDbGllbnQiLCJhcGkiLCIkc2F2ZSIsInJlcyIsImFuZ3VsYXIiLCJjb3B5IiwiJHNldFByaXN0aW5lIiwiJHNldFVudG91Y2hlZCIsImVyciIsInNlYXJjaFdvcmQiLCJyZW1vdmUiLCJjbGllbnQiLCJjb25maXJtIiwiZmlyc3ROYW1lIiwiJHJlbW92ZSIsImZpbHRlciIsImUiLCJfaWQiLCJmaW5kT25lIiwiZ2V0IiwidXBkYXRlIiwiJHVwZGF0ZSIsIm1haW5DdHJsIiwiVXNlclNlcnYiLCJPcmRlcnMiLCIkbG9jYXRpb24iLCIkcm9vdFNjb3BlIiwiJG9uIiwiJCRwYXRoIiwiY3VycmVudFNlY3Rpb24iLCJnZXRDdXJyZW50VXNlciIsImN1cnJlbnRVc2VyRGF0YSIsImdldEN1cnJlbnRVc2VyRGF0YSIsImxvZ291dCIsImdldE9yZGVycyIsInVzZXIiLCJpc0FkbWluIiwicm9sZSIsIm9yZGVycyIsInN0YXR1cyIsInRlY2giLCJvcmRlcnNDb21wbGV0ZSIsIm9yZGVyIiwiT3JkZXJDdHJsIiwiVXNlcnMiLCJnZXRjbGllbnQiLCJnZXRvcmRlciIsIm9yZGVyTGlzdCIsIm9yZGVyTW9kZWwiLCJvcmRlclNlYXJjaCIsInNvbHZlZE9wdCIsIm9yZGVyU3RhdHVzIiwic2VsZWN0ZWRUZWNoIiwieWVhcnNSYW5nZSIsInNlbGVjdGVkWWVhciIsIkRhdGUiLCJnZXRGdWxsWWVhciIsInN0YXJ0TW9udGgiLCJhZGRFbmRNb250aCIsImVuZE1vbnRoIiwib3JkZXJMaXN0UmFuZ2UiLCJyYW5nZSIsInB1c2giLCJpIiwiY2xpZW50RGF0YSIsIm5ld29yZGVyIiwic2VhcmNoQ2xpZW50Iiwic2VhcmNoT3JkZXIiLCJlZGl0IiwidXNlcnMiLCJnZXRBbGxVc2VycyIsIm9yZGVyc0xvYWRpbmciLCJvcmRlck1lc3NhZ2UiLCJmaW5kT3JkZXJzIiwidGhlbiIsImxlbmd0aCIsImNvbnNvbGUiLCJsb2ciLCJkbEtleUNvZGUiLCJyZXN0cmljdCIsImxpbmsiLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRycyIsImJpbmQiLCJldmVudCIsImtleUNvZGUiLCJ3aGljaCIsImNvZGUiLCIkYXBwbHkiLCIkZXZhbCIsIiRldmVudCIsInN0b3JlIiwiand0SGVscGVyIiwidG9rZW4iLCJwYXlsb2FkIiwiZGVjb2RlVG9rZW4iLCJsb2NhdGlvbiIsImhyZWYiLCJhcHBDb25maWd1cmF0aW9uIiwiYXBwTmFtZSIsImFwcERlcGVuZGVuY2llcyIsInJlZ2lzdGVyTW9kdWxlIiwibW9kdWxlTmFtZSIsIm1vZHVsZURlcGVuZGVuY2llcyIsIm1vZHVsZSIsInJlcXVpcmVzIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsInZpZXdzIiwicHJpdmF0ZSIsInRlbXBsYXRlVXJsIiwicmVxdWlyZXNMb2dpbiIsInJlcXVpcmVzQWRtaW4iLCJjb250cm9sbGVyIiwiZmFjdG9yeSIsIiRyZXNvdXJjZSIsIm1ldGhvZCIsIiRsb2NhdGlvblByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwib3RoZXJ3aXNlIiwicHVibGljIiwiZGlyZWN0aXZlIiwieWVhciIsInJlcSIsImp3dEludGVyY2VwdG9yUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwidG9rZW5HZXR0ZXIiLCIkc3RhdGUiLCJpZFRva2VuIiwiaXNUb2tlbkV4cGlyZWQiLCJza2lwQXV0aG9yaXphdGlvbiIsImlkX3Rva2VuIiwic2V0IiwiZ28iLCJpbnRlcmNlcHRvcnMiLCJydW4iLCJ0byIsInBhdGgiLCJwcmV2ZW50RGVmYXVsdCIsInJlcGxhY2UiLCJwdWJsaWNTaWdudXAiLCJuZXdVc2VyIiwic2lnbnVwIiwic2lnbmluIiwiZ2V0QWxsIiwiY3VycmVudFVzZXIiLCJnZXRPbmUiLCJyZXF1aXJlIiwic2NvcGUiLCJvdGhlck1vZGVsVmFsdWUiLCJlbGVtZW50IiwiYXR0cmlidXRlcyIsIm5nTW9kZWwiLCIkdmFsaWRhdG9ycyIsImNvbXBhcmVUbyIsIm1vZGVsVmFsdWUiLCIkd2F0Y2giLCIkdmFsaWRhdGUiLCJhdHRycyIsInNldEFzTG9hZGluZyIsImJvb2wiLCIkc2V0VmFsaWRpdHkiLCJzZXRBc0F2YWlsYWJsZSIsIiRwYXJzZXJzIiwidmFsdWUiLCJlbWFpbCIsInNlcnZpY2UiLCJuZ0VudGVyIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxZQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQWlGQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBTixFQUFBTyxPQUFBQyxPQUNBQyxHQUFBLEtBQ0FKLE9BQUFBLEVBQ0FDLFNBQUFBLEdBQ0EsU0FBQUksR0FDQUMsRUFBQUMsV0FBQUYsSUF0RkEsR0FFQUcsR0FGQUYsRUFBQUcsSUFJQUgsR0FBQUksZUFDQUosRUFBQUssZ0JBQ0FMLEVBQUFNLFdBQ0FDLElBQUEsS0FDQUMsS0FBQSxNQUVBUixFQUFBUyxhQUNBRixJQUFBLEtBQ0FDLEtBQUEsTUFHQVIsRUFBQVUsT0FBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUEsR0FBQXZCLEdBQUF3QixJQUFBYixFQUFBSSxZQUVBUSxHQUFBRSxNQUFBLFNBQUFDLEdBRUFDLFFBQUFDLEtBQUFmLEVBQUFGLEVBQUFJLGFBQ0FPLEVBQUFPLGVBQ0FQLEVBQUFRLGdCQUVBbkIsRUFBQU0sVUFBQUMsSUFBQSxLQUNBUCxFQUFBUyxZQUFBRixJQUFBLDJCQUNBUCxFQUFBUyxZQUFBRCxLQUFBTyxHQUNBLFNBQUFLLEdBRUFwQixFQUFBUyxZQUFBRixJQUFBLEtBQ0FQLEVBQUFNLFVBQUFDLElBQUFhLEVBQUFaLFFBSUFSLEVBQUFKLE9BQUEsV0FDQUksRUFBQUssYUFBQVgsUUFDQU0sRUFBQXFCLFdBQUFyQixFQUFBSyxhQUFBWCxPQUNBRCxFQUFBTyxFQUFBSyxhQUFBWCxPQUFBLFNBQ0FNLEVBQUFLLGFBQUFWLFdBQ0FLLEVBQUFxQixXQUFBckIsRUFBQUssYUFBQVYsU0FDQUYsRUFBQSxPQUFBTyxFQUFBSyxhQUFBVixZQUlBSyxFQUFBc0IsT0FBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFqQyxFQUFBaUMsUUFBQSxzQkFBQUQsRUFBQUUsVUFBQSxJQUFBRixFQUFBNUIsU0FBQSxLQUVBNkIsS0FDQUQsRUFBQUcsVUFDQTFCLEVBQUFDLFdBQUFELEVBQUFDLFdBQUEwQixPQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsTUFBQU4sRUFBQU0sUUFLQTdCLEVBQUE4QixRQUFBLFdBQ0F6QyxFQUFBd0IsSUFBQWtCLEtBQ0FqQyxHQUFBTixFQUFBTSxJQUNBLFNBQUFDLEdBQ0FDLEVBQUFJLFlBQUFMLEtBSUFDLEVBQUFnQyxPQUFBLFNBQUFyQixHQUNBWCxFQUFBSSxZQUFBNkIsUUFBQSxTQUFBbEIsR0FFQUosRUFBQU8sZUFDQVAsRUFBQVEsZ0JBRUFuQixFQUFBTSxVQUFBQyxJQUFBLEtBQ0FQLEVBQUFTLFlBQUFGLElBQUEsNEJBQ0FQLEVBQUFTLFlBQUFELEtBQUFPLEdBQ0EsU0FBQUssR0FFQXBCLEVBQUFTLFlBQUFGLElBQUEsS0FDQVAsRUFBQU0sVUFBQUMsSUFBQWEsRUFBQVosUUM1RUEsUUFBQTBCLFVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUEvQyxHQUNBLEdBQUFTLEdBQUFHLElBR0FtQyxHQUFBQyxJQUFBLG9CQUFBLFdBQ0EsT0FBQUYsRUFBQUcsUUFDQSxJQUFBLGFBQ0F4QyxFQUFBeUMsZUFBQSxXQUNBLE1BQ0EsS0FBQSxXQUNBekMsRUFBQXlDLGVBQUEsVUFDQSxNQUNBLEtBQUEsVUFDQXpDLEVBQUF5QyxlQUFBLFNBQ0EsTUFDQSxLQUFBLFNBQ0F6QyxFQUFBeUMsZUFBQSxjQU1BekMsRUFBQTBDLGVBQUEsV0FDQTFDLEVBQUEyQyxnQkFBQVIsRUFBQVMsd0JBR0E1QyxFQUFBNkMsT0FBQSxXQUNBN0MsRUFBQTJDLG1CQUNBUixFQUFBVSxVQUdBN0MsRUFBQThDLFVBQUEsV0FDQSxHQUFBQyxHQUFBL0MsRUFBQTJDLGVBQ0EzQyxHQUFBZ0QsUUFBQSxTQUFBRCxFQUFBRSxLQUVBYixFQUFBdkIsSUFBQWhCLE1BQUEsU0FBQUUsR0FDQUMsRUFBQWtELE9BQUFuRCxFQUFBNEIsT0FBQSxTQUFBQyxHQUNBLE1BQUE1QixHQUFBZ0QsUUFDQSxZQUFBcEIsRUFBQXVCLE9BRUEsWUFBQXZCLEVBQUF1QixRQUFBdkIsRUFBQXdCLEtBQUF0RCxJQUFBaUQsRUFBQWxCLE1BRUE3QixFQUFBcUQsZUFBQXRELEVBQUE0QixPQUFBLFNBQUFDLEdBQ0EsTUFBQSxjQUFBQSxFQUFBdUIsWUFLQW5ELEVBQUFzQixPQUFBLFNBQUFnQyxHQUNBLEdBQUE5QixHQUFBakMsRUFBQWlDLFFBQUEsaUNBQUE4QixFQUFBNUQsT0FBQSxLQUNBOEIsSUFDQThCLEVBQUE1QixRQUFBLFdBQ0EsYUFBQTRCLEVBQUFILE9BQ0FuRCxFQUFBa0QsT0FBQWxELEVBQUFrRCxPQUFBdkIsT0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFDLE1BQUF5QixFQUFBekIsTUFHQTdCLEVBQUFxRCxlQUFBckQsRUFBQXFELGVBQUExQixPQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsTUFBQXlCLEVBQUF6QixTQzFEQSxRQUFBMEIsV0FBQW5CLEVBQUEvQyxFQUFBbUUsRUFBQWxFLEVBQUFDLEVBQUFDLEdBcUtBLFFBQUFpRSxHQUFBL0QsRUFBQUMsR0FDQU4sRUFBQU8sT0FBQUMsT0FDQUMsR0FBQSxLQUNBSixPQUFBQSxFQUNBQyxTQUFBQSxHQUNBLFNBQUFJLEdBQ0FDLEVBQUFDLFdBQUFGLElBSUEsUUFBQTJELEdBQUFoRSxFQUFBQyxHQUNBeUMsRUFBQXhDLE9BQUFDLE9BQ0FDLEdBQUEsS0FDQUosT0FBQUEsRUFDQUMsU0FBQUEsR0FDQSxTQUFBSSxHQUNBQyxFQUFBMkQsVUFBQTVELElBcExBLEdBQUFDLEdBQUFHLElBRUFILEdBQUE0RCxjQUNBNUQsRUFBQTZELGVBQ0E3RCxFQUFBTSxXQUNBQyxJQUFBLEtBQ0FDLEtBQUEsTUFFQVIsRUFBQVMsYUFDQUYsSUFBQSxLQUNBQyxLQUFBLE1BRUFSLEVBQUE4RCxXQUFBLEtBQUEsTUFDQTlELEVBQUErRCxhQUFBLFlBQUEsV0FBQSxjQUNBL0QsRUFBQWdFLGFBQUEsR0FHQWhFLEVBQUFpRSxjQUNBakUsRUFBQWtFLGNBQUEsR0FBQUMsT0FBQUMsY0FDQXBFLEVBQUFxRSxXQUNBckUsRUFBQXNFLFlBQ0F0RSxFQUFBdUUsU0FDQXZFLEVBQUF3RSxpQkFFQSxJQUFBQyxLQUNBQSxHQUFBQyxLQUFBMUUsRUFBQWtFLGFBQ0EsS0FBQSxHQUFBUyxHQUFBLEVBQUEsR0FBQUEsRUFBQUEsSUFDQUYsRUFBQUMsS0FBQTFFLEVBQUFrRSxhQUFBUyxFQUVBM0UsR0FBQWlFLFdBQUFRLEVBRUF6RSxFQUFBVSxPQUFBLFNBQUFDLEdBRUFYLEVBQUE0RCxXQUFBckMsT0FBQXZCLEVBQUE0RSxXQUFBL0MsSUFDQTdCLEVBQUE0RCxXQUFBUixNQUNBdEQsR0FBQUUsRUFBQWdFLGFBQUFuQyxJQUNBSixVQUFBekIsRUFBQWdFLGFBQUF2QyxVQUNBOUIsU0FBQUssRUFBQWdFLGFBQUFyRSxTQUdBLElBQUFrRixHQUFBLEdBQUF6QyxHQUFBdkIsSUFBQWIsRUFBQTRELFdBRUFpQixHQUFBL0QsTUFBQSxTQUFBQyxHQUVBZixFQUFBNEQsY0FDQTVELEVBQUE0RSxXQUFBLEtBQ0E1RSxFQUFBSyxnQkFDQUwsRUFBQUMsV0FBQSxLQUNBVSxFQUFBTyxlQUNBUCxFQUFBUSxnQkFFQW5CLEVBQUFNLFVBQUFDLElBQUEsS0FDQVAsRUFBQVMsWUFBQUYsSUFBQSx5QkFDQVAsRUFBQVMsWUFBQUQsS0FBQU8sR0FDQSxTQUFBSyxHQUVBcEIsRUFBQVMsWUFBQUYsSUFBQSxLQUNBUCxFQUFBTSxVQUFBQyxJQUFBYSxFQUFBWixRQUlBUixFQUFBOEUsYUFBQSxXQUNBOUUsRUFBQUssYUFBQVgsUUFDQU0sRUFBQXFCLFdBQUFyQixFQUFBSyxhQUFBWCxPQUNBK0QsRUFBQXpELEVBQUFLLGFBQUFYLE9BQUEsU0FDQU0sRUFBQUssYUFBQVYsV0FDQUssRUFBQXFCLFdBQUFyQixFQUFBSyxhQUFBVixTQUNBOEQsRUFBQSxPQUFBekQsRUFBQUssYUFBQVYsWUFJQUssRUFBQStFLFlBQUEsV0FDQS9FLEVBQUE2RCxZQUFBbkUsUUFDQU0sRUFBQXFCLFdBQUFyQixFQUFBNkQsWUFBQW5FLE9BQ0FnRSxFQUFBMUQsRUFBQTZELFlBQUFuRSxPQUFBLFNBQ0FNLEVBQUE2RCxZQUFBbEUsV0FDQUssRUFBQXFCLFdBQUFyQixFQUFBNkQsWUFBQWxFLFNBQ0ErRCxFQUFBLE9BQUExRCxFQUFBNkQsWUFBQWxFLFlBSUFLLEVBQUFzQixPQUFBLFNBQUFnQyxHQUNBLEdBQUE5QixHQUFBakMsRUFBQWlDLFFBQUEsaUNBQUE4QixFQUFBNUQsT0FBQSxLQUVBOEIsS0FDQThCLEVBQUE1QixVQUNBMUIsRUFBQTJELFVBQUEzRCxFQUFBMkQsVUFBQWhDLE9BQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBQyxNQUFBeUIsRUFBQXpCLFFBS0E3QixFQUFBOEIsUUFBQSxTQUFBa0QsR0FDQTVDLEVBQUF2QixJQUFBa0IsS0FDQWpDLEdBQUFOLEVBQUFNLElBQ0EsU0FBQUMsR0FDQUMsRUFBQTRELFdBQUE3RCxFQUVBaUYsSUFDQWhGLEVBQUFnRSxhQUFBaEUsRUFBQWlGLE1BQUF0RCxPQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsTUFBQTdCLEVBQUE0RCxXQUFBUixLQUFBdEQsS0FFQUUsRUFBQWdFLGFBQUFoRSxFQUFBZ0UsYUFBQSxPQUtBaEUsRUFBQWdDLE9BQUEsU0FBQXJCLEdBQ0FYLEVBQUE0RCxXQUFBUixNQUNBdEQsR0FBQUUsRUFBQWdFLGFBQUFuQyxJQUNBSixVQUFBekIsRUFBQWdFLGFBQUF2QyxVQUNBOUIsU0FBQUssRUFBQWdFLGFBQUFyRSxVQUdBSyxFQUFBNEQsV0FBQTNCLFFBQUEsU0FBQWxCLEdBRUFKLEVBQUFPLGVBQ0FQLEVBQUFRLGdCQUVBbkIsRUFBQU0sVUFBQUMsSUFBQSxLQUNBUCxFQUFBUyxZQUFBRixJQUFBLDBCQUNBUCxFQUFBUyxZQUFBRCxLQUFBTyxHQUNBLFNBQUFLLEdBRUFwQixFQUFBUyxZQUFBRixJQUFBLEtBQ0FQLEVBQUFNLFVBQUFDLElBQUFhLEVBQUFaLFFBSUFSLEVBQUFrRixZQUFBLFdBQ0ExQixFQUFBM0MsSUFBQWhCLE1BQUEsU0FBQUUsR0FDQUMsRUFBQWlGLE1BQUFsRixFQUFBNEIsT0FBQSxTQUFBQyxHQUNBLE1BQUEsU0FBQUEsRUFBQXFCLFVBS0FqRCxFQUFBOEMsVUFBQSxXQUVBOUMsRUFBQW1GLGVBQUEsQ0FDQSxJQUFBWixHQUFBLElBR0F2RSxHQUFBb0YsYUFBQSxHQUNBcEYsRUFBQXdFLGtCQUVBeEUsRUFBQXNFLGNBQ0FDLEVBQUF2RSxFQUFBdUUsVUFHQW5DLEVBQUFpRCxXQUFBckYsRUFBQWtFLGFBQUFsRSxFQUFBcUUsV0FBQUUsR0FDQWUsS0FBQSxTQUFBdkYsR0FDQUMsRUFBQW1GLGVBQUEsRUFDQW5GLEVBQUF3RSxlQUFBekUsRUFBQVMsS0FDQSxHQUFBVCxFQUFBUyxLQUFBK0UsU0FDQXZGLEVBQUFvRixhQUFBLDhCQUVBLFNBQUFoRSxHQUNBcEIsRUFBQW9GLGFBQUEsMkJBQ0FJLFFBQUFDLElBQUFyRSxNQzlKQSxRQUFBc0UsYUFDQSxPQUNBQyxTQUFBLElBQ0FDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQUQsRUFBQUUsS0FBQSxXQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQUQsRUFBQUUsT0FBQUYsRUFBQUMsT0FFQUEsSUFBQUgsRUFBQUssTUFDQVAsRUFBQVEsT0FBQSxXQUNBUixFQUFBUyxNQUFBUCxFQUFBTCxXQUNBYSxPQUFBTixVQ1pBLFFBQUE5RCxVQUFBcUUsRUFBQUMsRUFBQWxILEVBQUFpRSxHQUVBckQsS0FBQXlDLG1CQUFBLFdBQ0EsR0FBQThELEdBQUFGLEVBQUF6RSxJQUFBLE1BQ0EsSUFBQTJFLEVBQUEsQ0FDQSxHQUFBQyxHQUFBRixFQUFBRyxZQUFBRixFQUNBLE9BQUFDLEdBRUEsT0FBQSxHQUlBeEcsS0FBQTZDLFFBQUEsV0FDQSxHQUFBMkQsR0FBQXhHLEtBQUF5QyxvQkFDQSxPQUFBLFNBQUErRCxFQUFBMUQsTUFPQTlDLEtBQUEwQyxPQUFBLFdBQ0EsR0FBQThELEdBQUF4RyxLQUFBeUMsb0JBQ0FZLEdBQUFYLE9BQUFkLEtBQ0FqQyxHQUFBNkcsRUFBQTlFLEtBQ0EsV0FDQTJFLEVBQUFsRixPQUFBLE9BQ0EvQixFQUFBc0gsU0FBQUMsS0FBQSxPQzNCQSxHQUFBQyxrQkFBQSxXQUNBLEdBQUFDLEdBQUEsT0FDQUMsR0FBQSxhQUFBLFlBQUEsY0FBQSxrQkFBQSxjQUdBQyxFQUFBLFNBQUFDLEVBQUFDLEdBRUFwRyxRQUFBcUcsT0FBQUYsRUFBQUMsT0FHQXBHLFFBQUFxRyxPQUFBTCxHQUFBTSxTQUFBNUMsS0FBQXlDLEdBR0EsUUFDQUgsUUFBQUEsRUFDQUMsZ0JBQUFBLEVBQ0FDLGVBQUFBLEtDZkFsRyxTQUFBcUcsT0FBQU4saUJBQUFDLFFBQUFELGlCQUFBRSxpQkNEQUYsaUJBQUFHLGVBQUEsVUNBQUgsaUJBQUFHLGVBQUEsU0NBQUgsaUJBQUFHLGVBQUEsUUNBQWxHLFFBQUFxRyxPQUFBLFVBQ0FFLFFBQUEsaUJBQUEsU0FBQUMsR0FFQUEsRUFDQUMsTUFBQSxlQUNBQyxJQUFBLFdBQ0FDLE9BQ0FDLFdBQ0FDLFlBQUEsdURBR0FySCxNQUNBc0gsZUFBQSxFQUNBQyxlQUFBLEtBRUFOLE1BQUEsY0FDQUMsSUFBQSxvQkFDQUMsT0FDQUMsV0FDQUMsWUFBQSxzREFHQXJILE1BQ0FzSCxlQUFBLEVBQ0FDLGVBQUEsUVZxRUEvRyxRQUNBcUcsT0FBQSxVQUNBVyxXQUFBLGNBQUEsVUFBQSxRQUFBLFVBQUEsZUFBQTVJLGFXOUZBNEIsUUFBQXFHLE9BQUEsVUFBQVksUUFBQSxXQUFBLFlBQUEsU0FBQUMsR0FFQSxHQUFBckgsR0FBQXFILEVBQUEsbUJBQ0FwSSxHQUFBLFNBRUFrQyxRQUNBbUcsT0FBQSxTQUlBdkksRUFBQXNJLEVBQUEsNENBQ0FwSSxHQUFBLE9BQ0FKLE9BQUEsU0FDQUMsU0FBQSxZQUdBLFFBQ0FrQixJQUFBQSxFQUNBakIsT0FBQUEsTUNuQkFvQixRQUNBcUcsT0FBQSxRQUNBRSxRQUFBLGlCQUFBLG9CQUFBLHFCQUFBLFNBQUFDLEVBQUFZLEVBQUFDLEdBRUFBLEVBQUFDLFVBQUEsS0FHQWQsRUFDQUMsTUFBQSxRQUNBQyxJQUFBLElBQ0FDLE9BQ0FZLFVBQ0FWLFlBQUEsNkNBR0FySCxNQUNBc0gsZUFBQSxLQUdBTCxNQUFBLGFBQ0FDLElBQUEsYUFDQUMsT0FDQUMsV0FDQUMsWUFBQSxrREFHQXJILE1BQ0FzSCxlQUFBLFFYd0NBOUcsUUFDQXFHLE9BQUEsUUFDQVcsV0FBQSxZQUFBLFdBQUEsU0FBQSxZQUFBLGFBQUEsVUFBQTlGLFdZckVBbEIsUUFBQXFHLE9BQUEsU0FDQUUsUUFBQSxpQkFBQSxTQUFBQyxHQUVBQSxFQUNBQyxNQUFBLGNBQ0FDLElBQUEsVUFDQUMsT0FDQUMsV0FDQUMsWUFBQSxxREFHQXJILE1BQ0FzSCxlQUFBLEVBQ0FDLGVBQUEsS0FFQU4sTUFBQSxhQUNBQyxJQUFBLG1CQUNBQyxPQUNBQyxXQUNBQyxZQUFBLG9EQUdBckgsTUFDQXNILGVBQUEsS0FFQUwsTUFBQSxlQUNBQyxJQUFBLGNBQ0FDLE9BQ0FDLFdBQ0FDLFlBQUEsc0RBR0FySCxNQUNBc0gsZUFBQSxRWHlKQTlHLFFBQ0FxRyxPQUFBLFNBQ0FXLFdBQUEsYUFBQSxTQUFBLFVBQUEsUUFBQSxRQUFBLFVBQUEsZUFBQXpFLFlDNUxBdkMsUUFBQXFHLE9BQUEsU0FBQW1CLFVBQUEsWUFBQTlDLFdXQ0ExRSxRQUFBcUcsT0FBQSxTQUFBWSxRQUFBLFVBQUEsWUFBQSxRQUFBLFNBQUFDLEVBQUE1SSxHQWdCQSxRQUFBK0YsR0FBQW9ELEVBQUFwRSxFQUFBRSxHQUNBLEdBQUFtRSxJQUNBUCxPQUFBLE1BQ0FULElBQUEseUJBQUFlLEVBQUEsVUFBQXBFLEVBQUEsSUFBQUUsRUFFQSxPQUFBakYsR0FBQW9KLEdBbkJBLEdBQUE3SCxHQUFBcUgsRUFBQSxrQkFDQXBJLEdBQUEsU0FFQWtDLFFBQ0FtRyxPQUFBLFNBSUF2SSxFQUFBc0ksRUFBQSwyQ0FDQXBJLEdBQUEsT0FDQUosT0FBQSxTQUNBQyxTQUFBLFlBV0EsUUFDQWtCLElBQUFBLEVBQ0FqQixPQUFBQSxFQUNBeUYsV0FBQUEsTUM1QkFyRSxRQUFBcUcsT0FBQSxRQUNBRSxRQUFBLGlCQUFBLHlCQUFBLGdCQUFBLFNBQUFDLEVBQUFtQixFQUFBQyxHQUVBcEIsRUFDQUMsTUFBQSxVQUNBQyxJQUFBLFVBQ0FDLE9BQ0FZLFVBQ0FWLFlBQUEsK0NBR0FySCxNQUNBc0gsZUFBQSxLQUVBTCxNQUFBLFVBQ0FDLElBQUEsVUFDQUMsT0FDQVksVUFDQVYsWUFBQSwrQ0FHQXJILE1BQ0FzSCxlQUFBLEtBRUFMLE1BQUEsWUFDQUMsSUFBQSxTQUNBQyxPQUNBQyxXQUNBQyxZQUFBLGtEQUdBQSxZQUFBLGdEQUNBckgsTUFDQXNILGVBQUEsRUFDQUMsZUFBQSxLQUVBTixNQUFBLFlBQ0FDLElBQUEsa0JBQ0FDLE9BQ0FDLFdBQ0FDLFlBQUEsa0RBR0FySCxNQUNBc0gsZUFBQSxFQUNBQyxlQUFBLEtBTUFZLEVBQUFFLGFBQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxTQUFBcEMsRUFBQW5ILEVBQUFrSCxFQUFBc0MsR0FDQSxHQUFBQyxHQUFBdkMsRUFBQXpFLElBQUEsTUFDQSxLQUNBLE1BQUEwRSxHQUFBdUMsZUFBQUQsR0FFQXpKLEdBQ0FvSSxJQUFBLDRDQUVBdUIsbUJBQUEsRUFDQWQsT0FBQSxPQUNBM0gsTUFDQWtHLE1BQUFxQyxLQUVBekQsS0FBQSxTQUFBdkYsR0FDQSxHQUFBbUosR0FBQW5KLEVBQUFTLEtBQUFrRyxLQUVBLE9BREFGLEdBQUEyQyxJQUFBLE1BQUFELEdBQ0FBLEdBQ0EsU0FBQTlILEdBR0EsTUFGQW9GLEdBQUFsRixPQUFBLE9BQ0F3SCxFQUFBTSxHQUFBLFdBQ0EsSUFHQUwsRUFFQSxNQUFBM0gsR0FFQSxNQURBb0YsR0FBQWxGLE9BQUEsUUFDQSxLQUdBc0gsRUFBQVMsYUFBQTNFLEtBQUEscUJBSUE0RSxLQUFBLGFBQUEsVUFBQSxRQUFBLFlBQUEsV0FBQSxTQUFBaEgsRUFBQS9DLEVBQUFpSCxFQUFBbkUsRUFBQUYsR0FDQUcsRUFBQUMsSUFBQSxvQkFBQSxTQUFBWCxFQUFBMkgsR0FDQSxHQUFBQSxFQUFBL0ksTUFBQStJLEVBQUEvSSxLQUFBc0gsY0FBQSxDQUNBLElBQUF0QixFQUFBekUsSUFBQSxPQUVBLE1BQUFNLEdBQUFtSCxLQUFBLFVBQ0EsSUFBQUQsRUFBQS9JLEtBQUF1SCxnQkFBQTVGLEVBQUFhLFVBRUEsTUFEQXBCLEdBQUE2SCxpQkFDQXBILEVBQUFtSCxLQUFBLGNBQUFFLGdCQzdGQTFJLFFBQUFxRyxPQUFBLFFBQ0FXLFdBQUEsa0JBQUEsVUFBQSxRQUFBLFdBQUEsUUFBQSxRQUFBLFlBQUEsZUFBQSxTQUFBLFNBQUF6SSxFQUFBaUUsRUFBQXJCLEVBQUE3QyxFQUFBa0gsRUFBQUMsRUFBQWpILEVBQUFzSixHQUVBLEdBQUE5SSxHQUFBRyxJQUNBSCxHQUFBK0MsUUFDQS9DLEVBQUFNLGFBRUFOLEVBQUEySixhQUFBLFdBRUEsR0FBQUMsR0FBQSxHQUFBcEcsR0FBQTNDLElBQUFiLEVBQUErQyxLQUVBNkcsR0FBQTlJLE1BQUEsU0FBQWYsR0FDQXlHLEVBQUEyQyxJQUFBLE1BQUFwSixFQUFBMkcsT0FDQW9DLEVBQUFNLEdBQUEsY0FDQSxTQUFBaEksR0FDQXBCLEVBQUFNLFVBQUFjLEVBQUFaLFFBSUFSLEVBQUE2SixPQUFBLFdBSUE3SixFQUFBK0MsS0FBQUUsTUFDQWpELEVBQUErQyxLQUFBcUQsS0FBQSxhQUNBcEcsRUFBQStDLEtBQUFFLEtBQUEsVUFFQWpELEVBQUErQyxLQUFBcUQsS0FBQSxhQUNBcEcsRUFBQStDLEtBQUFFLEtBQUEsT0FHQSxJQUFBMkcsR0FBQSxHQUFBcEcsR0FBQTNDLElBQUFiLEVBQUErQyxLQUVBNkcsR0FBQTlJLE1BQUEsU0FBQWYsR0FFQUMsRUFBQWlGLE1BQUFQLEtBQUEzRSxFQUFBUyxNQUVBUixFQUFBK0MsU0FDQSxTQUFBM0IsR0FDQXBCLEVBQUFNLFVBQUFjLEVBQUFaLFFBSUFSLEVBQUE4SixPQUFBLFdBQ0EsR0FBQS9HLEdBQUEsR0FBQVMsR0FBQXNHLE9BQUE5SixFQUFBK0MsS0FFQUEsR0FBQWpDLE1BQUEsU0FBQWYsR0FDQXlHLEVBQUEyQyxJQUFBLE1BQUFwSixFQUFBMkcsT0FFQW9DLEVBQUFNLEdBQUEsY0FFQSxTQUFBaEksR0FDQXBCLEVBQUFNLFVBQUFjLEVBQUFaLFFBSUFSLEVBQUErSixPQUFBLFdBQ0F2RyxFQUFBM0MsSUFBQWhCLE1BQUEsU0FBQUUsR0FDQUMsRUFBQWlGLE1BQUFsRixFQUFBNEIsT0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFDLE1BQUE3QixFQUFBZ0ssWUFBQW5JLFNBS0E3QixFQUFBaUssT0FBQSxXQUNBekcsRUFBQTNDLElBQUFrQixLQUNBakMsR0FBQU4sRUFBQU0sSUFDQSxTQUFBQyxHQUNBQyxFQUFBK0MsS0FBQWhELEtBSUFDLEVBQUEwQyxlQUFBLFdBQ0ExQyxFQUFBZ0ssWUFBQTdILEVBQUFTLHNCQUdBNUMsRUFBQWdDLE9BQUEsV0FDQWhDLEVBQUErQyxLQUFBZCxRQUFBLFNBQUFsQyxHQUNBK0ksRUFBQU0sR0FBQSxhQUNBLFNBQUFoSSxHQUNBcEIsRUFBQU0sVUFBQWMsRUFBQVosUUFJQVIsRUFBQXNCLE9BQUEsU0FBQXlCLEdBQ0EsR0FBQXZCLEdBQUFqQyxFQUFBaUMsUUFBQSwrQkFBQXVCLEVBQUF0QixVQUFBLElBQUFzQixFQUFBcEQsU0FBQSxLQUVBNkIsS0FDQXVCLEVBQUFyQixVQUNBMUIsRUFBQWlGLE1BQUFqRixFQUFBaUYsTUFBQXRELE9BQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBQyxNQUFBa0IsRUFBQWxCLFdBU0FiLFFBQUFxRyxPQUFBLFFBQ0FtQixVQUFBLGFBQUEsV0FDQSxPQUNBMEIsUUFBQSxVQUNBQyxPQUNBQyxnQkFBQSxjQUVBeEUsS0FBQSxTQUFBdUUsRUFBQUUsRUFBQUMsRUFBQUMsR0FFQUEsRUFBQUMsWUFBQUMsVUFBQSxTQUFBQyxHQUNBLE1BQUFBLElBQUFQLEVBQUFDLGlCQUdBRCxFQUFBUSxPQUFBLGtCQUFBLFdBQ0FKLEVBQUFLLG1CQU1BNUosUUFBQXFHLE9BQUEsUUFDQW1CLFVBQUEsK0JBQUEsUUFBQSxRQUFBLFNBQUFsSixFQUFBa0UsR0FFQSxPQUNBMEcsUUFBQSxVQUNBdEUsS0FBQSxTQUFBdUUsRUFBQUUsRUFBQVEsRUFBQU4sR0FHQSxRQUFBTyxHQUFBQyxHQUNBUixFQUFBUyxhQUFBLGlCQUFBRCxHQUdBLFFBQUFFLEdBQUFGLEdBQ0FSLEVBQUFTLGFBQUEsa0JBQUFELEdBR0FSLEVBQUFXLFNBQUF4RyxLQUFBLFNBQUF5RyxHQUNBLEdBQUFBLEdBQUEsSUFBQUEsRUFBQTVGLE9BQUEsQ0FFQXVGLEdBQUEsR0FDQUcsR0FBQSxFQUdBLElBQUF6SyxHQUFBZ0QsRUFBQTVELE9BQUFtQyxLQUNBcUosTUFBQUQsR0FDQSxXQUNBLE9BQUEzSyxFQUFBQSxPQUNBc0ssR0FBQSxHQUNBRyxHQUFBLEtBR0EsT0FBQUUsV1p0SEFuSyxRQUNBcUcsT0FBQSxRQUNBZ0UsUUFBQSxZQUFBLFFBQUEsWUFBQSxVQUFBLFFBQUFsSixXYWpDQW5CLFFBQUFxRyxPQUFBLFFBQUFZLFFBQUEsU0FBQSxZQUFBLFNBQUFDLEdBRUEsR0FBQXJILEdBQUFxSCxFQUFBLGlCQUNBcEksR0FBQSxTQUVBa0MsUUFDQW1HLE9BQUEsU0FJQTJCLEVBQUE1QixFQUFBLG9CQUVBckYsRUFBQXFGLEVBQUEsd0JBQ0FwSSxHQUFBLFNBR0FGLEVBQUFzSSxFQUFBLDJCQUNBa0QsTUFBQSxVQUdBLFFBQ0F2SyxJQUFBQSxFQUNBaUosT0FBQUEsRUFDQWpILE9BQUFBLEVBQ0FqRCxPQUFBQSxNQ3pCQW9CLFFBQUFxRyxPQUFBLFFBQ0FtQixVQUFBLFVBQUEsV0FDQSxNQUFBLFVBQUEyQixFQUFBRSxFQUFBUSxHQUNBUixFQUFBckUsS0FBQSxtQkFBQSxTQUFBQyxHQUNBLEtBQUFBLEVBQUFFLFFBQ0FnRSxFQUFBOUQsT0FBQSxXQUNBOEQsRUFBQTdELE1BQUF1RSxFQUFBUyxTQUNBckYsTUFBQUEsTUFJQUEsRUFBQXdEIiwiZmlsZSI6ImNvbXByZXNzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIENsaWVudEN0cmwoQ2xpZW50cywgJGh0dHAsICR3aW5kb3csICRzdGF0ZVBhcmFtcykge1xyXG4gIHZhciB2bSA9IHRoaXM7XHJcblxyXG4gIHZhciBtYXN0ZXJNb2RlbDtcclxuXHJcbiAgdm0uY2xpZW50TW9kZWwgPSB7fTtcclxuICB2bS5jbGllbnRTZWFyY2ggPSB7fTtcclxuICB2bS5lcnJvckluZm8gPSB7XHJcbiAgICBtc2c6IG51bGwsXHJcbiAgICBkYXRhOiBudWxsXHJcbiAgfTtcclxuICB2bS5zdWNjZXNzSW5mbyA9IHtcclxuICAgIG1zZzogbnVsbCxcclxuICAgIGRhdGE6IG51bGxcclxuICB9O1xyXG5cclxuICB2bS5jcmVhdGUgPSBmdW5jdGlvbihmb3JtKSB7XHJcbiAgICB2YXIgbmV3Q2xpZW50ID0gbmV3IENsaWVudHMuYXBpKHZtLmNsaWVudE1vZGVsKTtcclxuXHJcbiAgICBuZXdDbGllbnQuJHNhdmUoZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgIC8vcmVzZXQgZm9ybVxyXG4gICAgICBhbmd1bGFyLmNvcHkobWFzdGVyTW9kZWwsIHZtLmNsaWVudE1vZGVsKTtcclxuICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcclxuICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XHJcbiAgICAgIC8vYWxlcnRcclxuICAgICAgdm0uZXJyb3JJbmZvLm1zZyA9IG51bGw7XHJcbiAgICAgIHZtLnN1Y2Nlc3NJbmZvLm1zZyA9ICdDbGllbnRlIGNyZWFkbyBjb24gZXhpdG8nO1xyXG4gICAgICB2bS5zdWNjZXNzSW5mby5kYXRhID0gcmVzO1xyXG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgIC8vYWxlcnRcclxuICAgICAgdm0uc3VjY2Vzc0luZm8ubXNnID0gbnVsbDtcclxuICAgICAgdm0uZXJyb3JJbmZvLm1zZyA9IGVyci5kYXRhO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdm0uc2VhcmNoID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodm0uY2xpZW50U2VhcmNoLm51bWJlcikge1xyXG4gICAgICB2bS5zZWFyY2hXb3JkID0gdm0uY2xpZW50U2VhcmNoLm51bWJlcjtcclxuICAgICAgZ2V0Q2xpZW50KHZtLmNsaWVudFNlYXJjaC5udW1iZXIsICdudWxsJyk7XHJcbiAgICB9IGVsc2UgaWYgKHZtLmNsaWVudFNlYXJjaC5sYXN0TmFtZSkge1xyXG4gICAgICB2bS5zZWFyY2hXb3JkID0gdm0uY2xpZW50U2VhcmNoLmxhc3ROYW1lO1xyXG4gICAgICBnZXRDbGllbnQoJ251bGwnLCB2bS5jbGllbnRTZWFyY2gubGFzdE5hbWUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZtLnJlbW92ZSA9IGZ1bmN0aW9uKGNsaWVudCkge1xyXG4gICAgdmFyIGNvbmZpcm0gPSAkd2luZG93LmNvbmZpcm0oJ1F1aWVyZXMgZWxpbWluYXIgYSAnICsgY2xpZW50LmZpcnN0TmFtZSArICcgJyArIGNsaWVudC5sYXN0TmFtZSArICcgPycpO1xyXG5cclxuICAgIGlmIChjb25maXJtKSB7XHJcbiAgICAgIGNsaWVudC4kcmVtb3ZlKCk7XHJcbiAgICAgIHZtLmNsaWVudExpc3QgPSB2bS5jbGllbnRMaXN0LmZpbHRlcihmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgcmV0dXJuIGUuX2lkICE9PSBjbGllbnQuX2lkO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2bS5maW5kT25lID0gZnVuY3Rpb24oKSB7XHJcbiAgICBDbGllbnRzLmFwaS5nZXQoe1xyXG4gICAgICBpZDogJHN0YXRlUGFyYW1zLmlkXHJcbiAgICB9LCBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICB2bS5jbGllbnRNb2RlbCA9IHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdm0udXBkYXRlID0gZnVuY3Rpb24oZm9ybSl7XHJcbiAgICB2bS5jbGllbnRNb2RlbC4kdXBkYXRlKGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAvL3Jlc2V0IGZvcm1cclxuICAgICAgZm9ybS4kc2V0UHJpc3RpbmUoKTtcclxuICAgICAgZm9ybS4kc2V0VW50b3VjaGVkKCk7XHJcbiAgICAgIC8vYWxlcnRcclxuICAgICAgdm0uZXJyb3JJbmZvLm1zZyA9IG51bGw7XHJcbiAgICAgIHZtLnN1Y2Nlc3NJbmZvLm1zZyA9ICdDbGllbnRlIGVkaXRhZG8gY29uIGV4aXRvJztcclxuICAgICAgdm0uc3VjY2Vzc0luZm8uZGF0YSA9IHJlcztcclxuICAgIH0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAvL2FsZXJ0XHJcbiAgICAgIHZtLnN1Y2Nlc3NJbmZvLm1zZyA9IG51bGw7XHJcbiAgICAgIHZtLmVycm9ySW5mby5tc2cgPSBlcnIuZGF0YTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vIGZ1bmN0b24gaGVscGVycyAocHJpdmF0ZSlcclxuICBmdW5jdGlvbiBnZXRDbGllbnQobnVtYmVyLCBsYXN0TmFtZSkge1xyXG4gICAgQ2xpZW50cy5zZWFyY2gucXVlcnkoe1xyXG4gICAgICAnaWQnOiBudWxsLFxyXG4gICAgICAnbnVtYmVyJzogbnVtYmVyLFxyXG4gICAgICAnbGFzdE5hbWUnOiBsYXN0TmFtZVxyXG4gICAgfSwgZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICB2bS5jbGllbnRMaXN0ID0gcmVzcG9uc2U7XHJcbiAgICB9KTsgIFxyXG4gIH1cclxuXHJcbn1cclxuXHJcbmFuZ3VsYXJcclxuICAubW9kdWxlKCdjbGllbnQnKVxyXG4gIC5jb250cm9sbGVyKCdDbGllbnRDdHJsJywgWydDbGllbnRzJywgJyRodHRwJywgJyR3aW5kb3cnLCAnJHN0YXRlUGFyYW1zJywgQ2xpZW50Q3RybF0pO1xyXG4vLyBhbmd1bGFyLm1vZHVsZSgndXNlcicpXHJcbi8vICAgLmRpcmVjdGl2ZSgncmVjb3JkQXZhaWxhYmlsaXR5VmFsaWRhdG9yJywgWyckaHR0cCcsICdVc2VycycsIGZ1bmN0aW9uKCRodHRwLCBVc2Vycykge1xyXG5cclxuLy8gICAgIHJldHVybiB7XHJcbi8vICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuLy8gICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XHJcbi8vICAgICAgICAgLy92YXIgYXBpVXJsID0gYXR0cnMucmVjb3JkQXZhaWxhYmlsaXR5VmFsaWRhdG9yO1xyXG5cclxuLy8gICAgICAgICBmdW5jdGlvbiBzZXRBc0xvYWRpbmcoYm9vbCkge1xyXG4vLyAgICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ3JlY29yZExvYWRpbmcnLCAhYm9vbCk7XHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBmdW5jdGlvbiBzZXRBc0F2YWlsYWJsZShib29sKSB7XHJcbi8vICAgICAgICAgICBuZ01vZGVsLiRzZXRWYWxpZGl0eSgncmVjb3JkQXZhaWxhYmxlJywgYm9vbCk7XHJcbi8vICAgICAgICAgfVxyXG5cclxuLy8gICAgICAgICBuZ01vZGVsLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24odmFsdWUpIHtcclxuLy8gICAgICAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUubGVuZ3RoID09PSAwKSByZXR1cm47XHJcblxyXG4vLyAgICAgICAgICAgc2V0QXNMb2FkaW5nKHRydWUpO1xyXG4vLyAgICAgICAgICAgc2V0QXNBdmFpbGFibGUoZmFsc2UpO1xyXG5cclxuLy8gICAgICAgICAgIC8vIHVzaW5nIHJlc291cmNlXHJcbi8vICAgICAgICAgICB2YXIgZGF0YSA9IFVzZXJzLnNlYXJjaC5nZXQoe1xyXG4vLyAgICAgICAgICAgICBuYW1lOiB2YWx1ZVxyXG4vLyAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XHJcbi8vICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEgPT09ICcnKSB7XHJcbi8vICAgICAgICAgICAgICAgc2V0QXNMb2FkaW5nKGZhbHNlKTtcclxuLy8gICAgICAgICAgICAgICBzZXRBc0F2YWlsYWJsZSh0cnVlKTtcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgfSk7XHJcbi8vICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbi8vICAgICAgICAgfSk7XHJcbi8vICAgICAgIH1cclxuLy8gICAgIH07XHJcbi8vICAgfV0pOyIsImZ1bmN0aW9uIG1haW5DdHJsKFVzZXJTZXJ2LCBPcmRlcnMsICRsb2NhdGlvbiwgJHJvb3RTY29wZSwgJHdpbmRvdykge1xyXG5cdHZhciB2bSA9IHRoaXM7XHJcblxyXG5cdC8vIHNldCBzZWN0aW9uIG5hbWVcclxuXHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbigpIHtcclxuXHRcdHN3aXRjaCAoJGxvY2F0aW9uLiQkcGF0aCkge1xyXG5cdFx0XHRjYXNlICcvZGFzaGJvYXJkJzpcclxuXHRcdFx0XHR2bS5jdXJyZW50U2VjdGlvbiA9ICdEYXNoYm9hcmQnO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICcvY2xpZW50cyc6XHJcblx0XHRcdFx0dm0uY3VycmVudFNlY3Rpb24gPSAnQ2xpZW50ZXMnO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICcvb3JkZXJzJzpcclxuXHRcdFx0XHR2bS5jdXJyZW50U2VjdGlvbiA9ICdPcmRlbmVzJztcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAnL3VzZXJzJzpcclxuXHRcdFx0XHR2bS5jdXJyZW50U2VjdGlvbiA9ICdVc3Vhcmlvcyc7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cclxuXHR2bS5nZXRDdXJyZW50VXNlciA9IChmdW5jdGlvbigpIHtcclxuXHRcdHZtLmN1cnJlbnRVc2VyRGF0YSA9IFVzZXJTZXJ2LmdldEN1cnJlbnRVc2VyRGF0YSgpO1xyXG5cdH0pKCk7XHJcblxyXG5cdHZtLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dm0uY3VycmVudFVzZXJEYXRhID0ge307XHJcblx0XHRVc2VyU2Vydi5sb2dvdXQoKTtcclxuXHR9O1xyXG5cclxuXHR2bS5nZXRPcmRlcnMgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB1c2VyID0gdm0uY3VycmVudFVzZXJEYXRhO1xyXG5cdFx0dm0uaXNBZG1pbiA9ICh1c2VyLnJvbGUgPT0gJ0FkbWluJykgPyB0cnVlIDogZmFsc2U7XHJcblxyXG5cdFx0T3JkZXJzLmFwaS5xdWVyeShmdW5jdGlvbihyZXNwb25zZSkge1xyXG5cdFx0XHR2bS5vcmRlcnMgPSByZXNwb25zZS5maWx0ZXIoZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRpZiAodm0uaXNBZG1pbikge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGUuc3RhdHVzID09ICdBc2lnbmFkYSc7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBlLnN0YXR1cyA9PSAnQXNpZ25hZGEnICYmIGUudGVjaC5pZCA9PSB1c2VyLl9pZDtcclxuXHRcdFx0fSk7XHJcblx0XHRcdHZtLm9yZGVyc0NvbXBsZXRlID0gcmVzcG9uc2UuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0cmV0dXJuIGUuc3RhdHVzID09ICdDb21wbGV0YWRhJztcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHR2bS5yZW1vdmUgPSBmdW5jdGlvbihvcmRlcikge1xyXG5cdFx0dmFyIGNvbmZpcm0gPSAkd2luZG93LmNvbmZpcm0oJ1F1aWVyZXMgZWxpbWluYXIgbGEgb3JkZW4gTsKwICMnICsgb3JkZXIubnVtYmVyICsgJyA/Jyk7XHJcblx0XHRpZiAoY29uZmlybSkge1xyXG5cdFx0XHRvcmRlci4kcmVtb3ZlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBpZihvcmRlci5zdGF0dXMgPT09ICdBc2lnbmFkYScpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZtLm9yZGVycyA9IHZtLm9yZGVycy5maWx0ZXIoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5faWQgIT09IG9yZGVyLl9pZDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5vcmRlcnNDb21wbGV0ZSA9IHZtLm9yZGVyc0NvbXBsZXRlLmZpbHRlcihmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLl9pZCAhPT0gb3JkZXIuX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG59XHJcblxyXG5hbmd1bGFyXHJcblx0Lm1vZHVsZSgnbWFpbicpXHJcblx0LmNvbnRyb2xsZXIoJ21haW5DdHJsJywgWydVc2VyU2VydicsICdPcmRlcnMnLCAnJGxvY2F0aW9uJywgJyRyb290U2NvcGUnLCAnJHdpbmRvdycsIG1haW5DdHJsXSk7IiwiZnVuY3Rpb24gT3JkZXJDdHJsKE9yZGVycywgQ2xpZW50cywgVXNlcnMsICRodHRwLCAkd2luZG93LCAkc3RhdGVQYXJhbXMpIHtcclxuICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICB2bS5vcmRlck1vZGVsID0ge307XHJcbiAgdm0ub3JkZXJTZWFyY2ggPSB7fTtcclxuICB2bS5lcnJvckluZm8gPSB7XHJcbiAgICBtc2c6IG51bGwsXHJcbiAgICBkYXRhOiBudWxsXHJcbiAgfTtcclxuICB2bS5zdWNjZXNzSW5mbyA9IHtcclxuICAgIG1zZzogbnVsbCxcclxuICAgIGRhdGE6IG51bGxcclxuICB9O1xyXG4gIHZtLnNvbHZlZE9wdCA9IFsnTm8nLCAnU2knXTtcclxuICB2bS5vcmRlclN0YXR1cyA9IFsnQ2FuY2VsYWRhJywgJ0FzaWduYWRhJywgJ0NvbXBsZXRhZGEnXTtcclxuICB2bS5zZWxlY3RlZFRlY2ggPSAnJztcclxuXHJcbiAgLy8gdmlldyBvcmRlcnMgZGVjbGFyYXRpb25zXHJcbiAgdm0ueWVhcnNSYW5nZSA9IFtdO1xyXG4gIHZtLnNlbGVjdGVkWWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTs7XHJcbiAgdm0uc3RhcnRNb250aDtcclxuICB2bS5hZGRFbmRNb250aDtcclxuICB2bS5lbmRNb250aDtcclxuICB2bS5vcmRlckxpc3RSYW5nZSA9IFtdO1xyXG4gIC8vIGNhbGN1bGF0ZSB5ZWFyIHJhbmdlXHJcbiAgdmFyIHJhbmdlID0gW107XHJcbiAgcmFuZ2UucHVzaCh2bS5zZWxlY3RlZFllYXIpO1xyXG4gIGZvciAodmFyIGkgPSAxOyBpIDwgMzA7IGkrKykge1xyXG4gICAgcmFuZ2UucHVzaCh2bS5zZWxlY3RlZFllYXIgLSBpKTtcclxuICB9XHJcbiAgdm0ueWVhcnNSYW5nZSA9IHJhbmdlO1xyXG5cclxuICB2bS5jcmVhdGUgPSBmdW5jdGlvbihmb3JtKSB7XHJcbiAgICAvLyBhc2luZyBhdHRyXHJcbiAgICB2bS5vcmRlck1vZGVsLmNsaWVudCA9IHZtLmNsaWVudERhdGEuX2lkO1xyXG4gICAgdm0ub3JkZXJNb2RlbC50ZWNoID0ge1xyXG4gICAgICBpZDogdm0uc2VsZWN0ZWRUZWNoLl9pZCxcclxuICAgICAgZmlyc3ROYW1lOiB2bS5zZWxlY3RlZFRlY2guZmlyc3ROYW1lLFxyXG4gICAgICBsYXN0TmFtZTogdm0uc2VsZWN0ZWRUZWNoLmxhc3ROYW1lXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBuZXdvcmRlciA9IG5ldyBPcmRlcnMuYXBpKHZtLm9yZGVyTW9kZWwpO1xyXG5cclxuICAgIG5ld29yZGVyLiRzYXZlKGZ1bmN0aW9uKHJlcykge1xyXG4gICAgICAvL3Jlc2V0IGZvcm1cclxuICAgICAgdm0ub3JkZXJNb2RlbCA9IHt9O1xyXG4gICAgICB2bS5jbGllbnREYXRhID0gbnVsbDtcclxuICAgICAgdm0uY2xpZW50U2VhcmNoID0ge307XHJcbiAgICAgIHZtLmNsaWVudExpc3QgPSBudWxsO1xyXG4gICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xyXG4gICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcclxuICAgICAgLy9hbGVydFxyXG4gICAgICB2bS5lcnJvckluZm8ubXNnID0gbnVsbDtcclxuICAgICAgdm0uc3VjY2Vzc0luZm8ubXNnID0gJ09yZGVuIGNyZWFkYSBjb24gZXhpdG8nO1xyXG4gICAgICB2bS5zdWNjZXNzSW5mby5kYXRhID0gcmVzO1xyXG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgIC8vYWxlcnRcclxuICAgICAgdm0uc3VjY2Vzc0luZm8ubXNnID0gbnVsbDtcclxuICAgICAgdm0uZXJyb3JJbmZvLm1zZyA9IGVyci5kYXRhO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdm0uc2VhcmNoQ2xpZW50ID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodm0uY2xpZW50U2VhcmNoLm51bWJlcikge1xyXG4gICAgICB2bS5zZWFyY2hXb3JkID0gdm0uY2xpZW50U2VhcmNoLm51bWJlcjtcclxuICAgICAgZ2V0Y2xpZW50KHZtLmNsaWVudFNlYXJjaC5udW1iZXIsICdudWxsJyk7XHJcbiAgICB9IGVsc2UgaWYgKHZtLmNsaWVudFNlYXJjaC5sYXN0TmFtZSkge1xyXG4gICAgICB2bS5zZWFyY2hXb3JkID0gdm0uY2xpZW50U2VhcmNoLmxhc3ROYW1lO1xyXG4gICAgICBnZXRjbGllbnQoJ251bGwnLCB2bS5jbGllbnRTZWFyY2gubGFzdE5hbWUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZtLnNlYXJjaE9yZGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodm0ub3JkZXJTZWFyY2gubnVtYmVyKSB7XHJcbiAgICAgIHZtLnNlYXJjaFdvcmQgPSB2bS5vcmRlclNlYXJjaC5udW1iZXI7XHJcbiAgICAgIGdldG9yZGVyKHZtLm9yZGVyU2VhcmNoLm51bWJlciwgJ251bGwnKTtcclxuICAgIH0gZWxzZSBpZiAodm0ub3JkZXJTZWFyY2gubGFzdE5hbWUpIHtcclxuICAgICAgdm0uc2VhcmNoV29yZCA9IHZtLm9yZGVyU2VhcmNoLmxhc3ROYW1lO1xyXG4gICAgICBnZXRvcmRlcignbnVsbCcsIHZtLm9yZGVyU2VhcmNoLmxhc3ROYW1lKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2bS5yZW1vdmUgPSBmdW5jdGlvbihvcmRlcikge1xyXG4gICAgdmFyIGNvbmZpcm0gPSAkd2luZG93LmNvbmZpcm0oJ1F1aWVyZXMgZWxpbWluYXIgbGEgb3JkZW4gTsKwICMnICsgb3JkZXIubnVtYmVyICsgJyA/Jyk7XHJcblxyXG4gICAgaWYgKGNvbmZpcm0pIHtcclxuICAgICAgb3JkZXIuJHJlbW92ZSgpO1xyXG4gICAgICB2bS5vcmRlckxpc3QgPSB2bS5vcmRlckxpc3QuZmlsdGVyKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gZS5faWQgIT09IG9yZGVyLl9pZDtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgdm0uZmluZE9uZSA9IGZ1bmN0aW9uKGVkaXQpIHtcclxuICAgIE9yZGVycy5hcGkuZ2V0KHtcclxuICAgICAgaWQ6ICRzdGF0ZVBhcmFtcy5pZFxyXG4gICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgdm0ub3JkZXJNb2RlbCA9IHJlc3BvbnNlO1xyXG4gICAgICAvLyBzZXQgdGVjaCBmb3Igc2VsZWN0IGluIGVkaXQgZm9ybVxyXG4gICAgICBpZiAoZWRpdCkge1xyXG4gICAgICAgIHZtLnNlbGVjdGVkVGVjaCA9IHZtLnVzZXJzLmZpbHRlcihmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICByZXR1cm4gZS5faWQgPT09IHZtLm9yZGVyTW9kZWwudGVjaC5pZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2bS5zZWxlY3RlZFRlY2ggPSB2bS5zZWxlY3RlZFRlY2hbMF07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIHZtLnVwZGF0ZSA9IGZ1bmN0aW9uKGZvcm0pIHtcclxuICAgIHZtLm9yZGVyTW9kZWwudGVjaCA9IHtcclxuICAgICAgaWQ6IHZtLnNlbGVjdGVkVGVjaC5faWQsXHJcbiAgICAgIGZpcnN0TmFtZTogdm0uc2VsZWN0ZWRUZWNoLmZpcnN0TmFtZSxcclxuICAgICAgbGFzdE5hbWU6IHZtLnNlbGVjdGVkVGVjaC5sYXN0TmFtZVxyXG4gICAgfTtcclxuXHJcbiAgICB2bS5vcmRlck1vZGVsLiR1cGRhdGUoZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgIC8vcmVzZXQgZm9ybVxyXG4gICAgICBmb3JtLiRzZXRQcmlzdGluZSgpO1xyXG4gICAgICBmb3JtLiRzZXRVbnRvdWNoZWQoKTtcclxuICAgICAgLy9hbGVydFxyXG4gICAgICB2bS5lcnJvckluZm8ubXNnID0gbnVsbDtcclxuICAgICAgdm0uc3VjY2Vzc0luZm8ubXNnID0gJ09yZGVuIGVkaXRhZGEgY29uIMOpeGl0byc7XHJcbiAgICAgIHZtLnN1Y2Nlc3NJbmZvLmRhdGEgPSByZXM7XHJcbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgLy9hbGVydFxyXG4gICAgICB2bS5zdWNjZXNzSW5mby5tc2cgPSBudWxsO1xyXG4gICAgICB2bS5lcnJvckluZm8ubXNnID0gZXJyLmRhdGE7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICB2bS5nZXRBbGxVc2VycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgVXNlcnMuYXBpLnF1ZXJ5KGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgIHZtLnVzZXJzID0gcmVzcG9uc2UuZmlsdGVyKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICByZXR1cm4gZS5yb2xlID09PSAnVGVjaCc7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgdm0uZ2V0T3JkZXJzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvLyBzZXRzXHJcbiAgICB2bS5vcmRlcnNMb2FkaW5nID0gdHJ1ZTtcclxuICAgIHZhciBlbmRNb250aCA9IG51bGw7XHJcblxyXG4gICAgLy9yZXNldHNcclxuICAgIHZtLm9yZGVyTWVzc2FnZSA9ICcnO1xyXG4gICAgdm0ub3JkZXJMaXN0UmFuZ2UgPSBbXTtcclxuXHJcbiAgICBpZiAodm0uYWRkRW5kTW9udGgpIHtcclxuICAgICAgZW5kTW9udGggPSB2bS5lbmRNb250aDtcclxuICAgIH1cclxuXHJcbiAgICBPcmRlcnMuZmluZE9yZGVycyh2bS5zZWxlY3RlZFllYXIsIHZtLnN0YXJ0TW9udGgsIGVuZE1vbnRoKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIHZtLm9yZGVyc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICB2bS5vcmRlckxpc3RSYW5nZSA9IHJlc3BvbnNlLmRhdGE7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgIHZtLm9yZGVyTWVzc2FnZSA9IFwiTm8gc2UgZW5jb250cmFyb24gb3JkZW5lc1wiXHJcbiAgICAgICAgfVxyXG4gICAgICB9LCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICB2bS5vcmRlck1lc3NhZ2UgPSBcIlNlIGhhIHByb2R1Y2lkbyB1biBlcnJvclwiO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIC8vIGZ1bmN0b24gaGVscGVycyAocHJpdmF0ZSlcclxuICBmdW5jdGlvbiBnZXRjbGllbnQobnVtYmVyLCBsYXN0TmFtZSkge1xyXG4gICAgQ2xpZW50cy5zZWFyY2gucXVlcnkoe1xyXG4gICAgICAnaWQnOiBudWxsLFxyXG4gICAgICAnbnVtYmVyJzogbnVtYmVyLFxyXG4gICAgICAnbGFzdE5hbWUnOiBsYXN0TmFtZVxyXG4gICAgfSwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgdm0uY2xpZW50TGlzdCA9IHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRvcmRlcihudW1iZXIsIGxhc3ROYW1lKSB7XHJcbiAgICBPcmRlcnMuc2VhcmNoLnF1ZXJ5KHtcclxuICAgICAgJ2lkJzogbnVsbCxcclxuICAgICAgJ251bWJlcic6IG51bWJlcixcclxuICAgICAgJ2xhc3ROYW1lJzogbGFzdE5hbWVcclxuICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgIHZtLm9yZGVyTGlzdCA9IHJlc3BvbnNlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5hbmd1bGFyXHJcbiAgLm1vZHVsZSgnb3JkZXInKVxyXG4gIC5jb250cm9sbGVyKCdPcmRlckN0cmwnLCBbJ09yZGVycycsICdDbGllbnRzJywgJ1VzZXJzJywgJyRodHRwJywgJyR3aW5kb3cnLCAnJHN0YXRlUGFyYW1zJywgT3JkZXJDdHJsXSk7XHJcbi8vIGFuZ3VsYXIubW9kdWxlKCd1c2VyJylcclxuLy8gICAuZGlyZWN0aXZlKCdyZWNvcmRBdmFpbGFiaWxpdHlWYWxpZGF0b3InLCBbJyRodHRwJywgJ1VzZXJzJywgZnVuY3Rpb24oJGh0dHAsIFVzZXJzKSB7XHJcblxyXG4vLyAgICAgcmV0dXJuIHtcclxuLy8gICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4vLyAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcclxuLy8gICAgICAgICAvL3ZhciBhcGlVcmwgPSBhdHRycy5yZWNvcmRBdmFpbGFiaWxpdHlWYWxpZGF0b3I7XHJcblxyXG4vLyAgICAgICAgIGZ1bmN0aW9uIHNldEFzTG9hZGluZyhib29sKSB7XHJcbi8vICAgICAgICAgICBuZ01vZGVsLiRzZXRWYWxpZGl0eSgncmVjb3JkTG9hZGluZycsICFib29sKTtcclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIGZ1bmN0aW9uIHNldEFzQXZhaWxhYmxlKGJvb2wpIHtcclxuLy8gICAgICAgICAgIG5nTW9kZWwuJHNldFZhbGlkaXR5KCdyZWNvcmRBdmFpbGFibGUnLCBib29sKTtcclxuLy8gICAgICAgICB9XHJcblxyXG4vLyAgICAgICAgIG5nTW9kZWwuJHBhcnNlcnMucHVzaChmdW5jdGlvbih2YWx1ZSkge1xyXG4vLyAgICAgICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggPT09IDApIHJldHVybjtcclxuXHJcbi8vICAgICAgICAgICBzZXRBc0xvYWRpbmcodHJ1ZSk7XHJcbi8vICAgICAgICAgICBzZXRBc0F2YWlsYWJsZShmYWxzZSk7XHJcblxyXG4vLyAgICAgICAgICAgLy8gdXNpbmcgcmVzb3VyY2VcclxuLy8gICAgICAgICAgIHZhciBkYXRhID0gVXNlcnMuc2VhcmNoLmdldCh7XHJcbi8vICAgICAgICAgICAgIG5hbWU6IHZhbHVlXHJcbi8vICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcclxuLy8gICAgICAgICAgICAgaWYgKGRhdGEuZGF0YSA9PT0gJycpIHtcclxuLy8gICAgICAgICAgICAgICBzZXRBc0xvYWRpbmcoZmFsc2UpO1xyXG4vLyAgICAgICAgICAgICAgIHNldEFzQXZhaWxhYmxlKHRydWUpO1xyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuLy8gICAgICAgICB9KTtcclxuLy8gICAgICAgfVxyXG4vLyAgICAgfTtcclxuLy8gICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoXCJvcmRlclwiKS5kaXJlY3RpdmUoJ2RsS2V5Q29kZScsIGRsS2V5Q29kZSk7XHJcblxyXG5mdW5jdGlvbiBkbEtleUNvZGUoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzKSB7XHJcbiAgICAgICAgICAgICRlbGVtZW50LmJpbmQoXCJrZXlwcmVzc1wiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleUNvZGUgPSBldmVudC53aGljaCB8fCBldmVudC5rZXlDb2RlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXlDb2RlID09ICRhdHRycy5jb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRldmFsKCRhdHRycy5kbEtleUNvZGUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRldmVudDogZXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59IiwiZnVuY3Rpb24gVXNlclNlcnYoc3RvcmUsIGp3dEhlbHBlciwgJHdpbmRvdywgVXNlcnMpIHtcclxuXHJcblx0dGhpcy5nZXRDdXJyZW50VXNlckRhdGEgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0b2tlbiA9IHN0b3JlLmdldCgnand0Jyk7XHJcblx0XHRpZiAodG9rZW4pIHtcclxuXHRcdFx0dmFyIHBheWxvYWQgPSBqd3RIZWxwZXIuZGVjb2RlVG9rZW4odG9rZW4pO1xyXG5cdFx0XHRyZXR1cm4gcGF5bG9hZDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHR0aGlzLmlzQWRtaW4gPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBwYXlsb2FkID0gdGhpcy5nZXRDdXJyZW50VXNlckRhdGEoKTtcclxuXHRcdGlmIChwYXlsb2FkLnJvbGUgPT0gJ0FkbWluJykge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHR0aGlzLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHBheWxvYWQgPSB0aGlzLmdldEN1cnJlbnRVc2VyRGF0YSgpO1xyXG5cdFx0VXNlcnMubG9nb3V0LmdldCh7XHJcblx0XHRcdGlkOiBwYXlsb2FkLl9pZFxyXG5cdFx0fSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHN0b3JlLnJlbW92ZSgnand0Jyk7XHJcblx0XHRcdCR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvJztcclxuXHRcdH0pO1xyXG5cdH07XHJcbn1cclxuXHJcbmFuZ3VsYXJcclxuXHQubW9kdWxlKCd1c2VyJylcclxuXHQuc2VydmljZSgnVXNlclNlcnYnLCBbJ3N0b3JlJywgJ2p3dEhlbHBlcicsICckd2luZG93JywgJ1VzZXJzJywgVXNlclNlcnZdKTsiLCJ2YXIgYXBwQ29uZmlndXJhdGlvbiA9IChmdW5jdGlvbigpIHtcclxuXHR2YXIgYXBwTmFtZSA9ICdtYWluJztcclxuXHR2YXIgYXBwRGVwZW5kZW5jaWVzID0gWyduZ1Jlc291cmNlJywgJ3VpLnJvdXRlcicsICdhbmd1bGFyLWp3dCcsICdhbmd1bGFyLXN0b3JhZ2UnLCAnbmdNZXNzYWdlcyddO1xyXG5cclxuXHQvL01ldGhvZCBmb3IgYWRkIG5ldyBtb2R1bGVzXHJcblx0dmFyIHJlZ2lzdGVyTW9kdWxlID0gZnVuY3Rpb24obW9kdWxlTmFtZSwgbW9kdWxlRGVwZW5kZW5jaWVzKSB7XHJcblx0XHQvLyBDcmVhdGUgbW9kdWxlXHJcblx0XHRhbmd1bGFyLm1vZHVsZShtb2R1bGVOYW1lLCBtb2R1bGVEZXBlbmRlbmNpZXMgfHwgW10pO1xyXG5cclxuXHRcdC8vIEFkZCB0aGUgbmV3IG1vZHVsZSB0byB0aGUgYW5ndWxhciBjb25maWcgZmlsZVxyXG5cdFx0YW5ndWxhci5tb2R1bGUoYXBwTmFtZSkucmVxdWlyZXMucHVzaChtb2R1bGVOYW1lKTtcclxuXHR9O1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0YXBwTmFtZTogYXBwTmFtZSxcclxuXHRcdGFwcERlcGVuZGVuY2llczogYXBwRGVwZW5kZW5jaWVzLFxyXG5cdFx0cmVnaXN0ZXJNb2R1bGU6IHJlZ2lzdGVyTW9kdWxlXHJcblx0fVxyXG59KSAoKTsiLCIvL0RlZmluZSBtYWluIG1vZHVsZVxyXG5hbmd1bGFyLm1vZHVsZShhcHBDb25maWd1cmF0aW9uLmFwcE5hbWUsIGFwcENvbmZpZ3VyYXRpb24uYXBwRGVwZW5kZW5jaWVzKTsiLCJhcHBDb25maWd1cmF0aW9uLnJlZ2lzdGVyTW9kdWxlKCdjbGllbnQnKTsiLCJhcHBDb25maWd1cmF0aW9uLnJlZ2lzdGVyTW9kdWxlKCdvcmRlcicpOyIsImFwcENvbmZpZ3VyYXRpb24ucmVnaXN0ZXJNb2R1bGUoJ3VzZXInKTsiLCJhbmd1bGFyLm1vZHVsZSgnY2xpZW50JylcclxuICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlcikge1xyXG5cclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgIC5zdGF0ZSgnY2xpZW50UGFuZWwnLCB7XHJcbiAgICAgICAgdXJsOiAnL2NsaWVudHMnLFxyXG4gICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAncHJpdmF0ZSc6IHtcclxuICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL2NsaWVudC92aWV3cy9jbGllbnQtcGFuZWwuY2xpZW50LnZpZXcuaHRtbCcsXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXF1aXJlc0xvZ2luOiB0cnVlLFxyXG4gICAgICAgICAgcmVxdWlyZXNBZG1pbjogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgfSkuc3RhdGUoJ2VkaXRDbGllbnQnLCB7XHJcbiAgICAgICAgdXJsOiAnL2NsaWVudHMvOmlkL2VkaXQnLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICdwcml2YXRlJzoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL2NsaWVudC92aWV3cy9lZGl0LWNsaWVudC5jbGllbnQudmlldy5odG1sJyxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgcmVxdWlyZXNMb2dpbjogdHJ1ZSxcclxuICAgICAgICAgIHJlcXVpcmVzQWRtaW46IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1dKTsiLCIvL0FydGljbGVzIHNlcnZpY2UgdXNlZCBmb3IgY29tbXVuaWNhdGluZyB3aXRoIHRoZSBhcnRpY2xlcyBSRVNUIGVuZHBvaW50c1xyXG5hbmd1bGFyLm1vZHVsZSgnY2xpZW50JykuZmFjdG9yeSgnQ2xpZW50cycsIFsnJHJlc291cmNlJywgZnVuY3Rpb24oJHJlc291cmNlKSB7XHJcblxyXG5cdHZhciBhcGkgPSAkcmVzb3VyY2UoJ2FwaS9jbGllbnRzLzppZCcsIHtcclxuXHRcdGlkOiAnQF9pZCdcclxuXHR9LCB7XHJcblx0XHR1cGRhdGU6IHtcclxuXHRcdFx0bWV0aG9kOiAnUFVUJ1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHR2YXIgc2VhcmNoID0gJHJlc291cmNlKCdhcGkvY2xpZW50cy86aWQvc2VhcmNoLzpudW1iZXIvOmxhc3ROYW1lJywge1xyXG5cdFx0aWQ6ICdAX2lkJyxcclxuXHRcdG51bWJlcjogJ251bWJlcicsXHJcblx0XHRsYXN0TmFtZTogJ2xhc3ROYW1lJ1xyXG5cdH0pO1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0YXBpOiBhcGksXHJcblx0XHRzZWFyY2g6IHNlYXJjaFxyXG5cdH07XHJcbn1dKTsiLCJhbmd1bGFyXHJcbiAgICAubW9kdWxlKCdtYWluJylcclxuICAgIC5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xyXG4gICAgICAgIC8vIFJlZGlyZWN0IHRvIGhvbWUgdmlldyB3aGVuIHJvdXRlIG5vdCBmb3VuZFxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcclxuXHJcbiAgICAgICAgLy8gSG9tZSBzdGF0ZSByb3V0aW5nXHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdob21lJywge1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnLycsXHJcbiAgICAgICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgICAgICdwdWJsaWMnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9tYWluL3ZpZXdzL2hvbWUuY2xpZW50LnZpZXcuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlc0xvZ2luOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoJ2Rhc2hib2FyZCcsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9kYXNoYm9hcmQnLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAncHJpdmF0ZSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL21haW4vdmlld3MvZGFzaGJvYXJkLmNsaWVudC52aWV3Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZXNMb2dpbjogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gdXNlIHRoZSBIVE1MNSBIaXN0b3J5IEFQSVxyXG4gICAgICAgIC8vJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xyXG5cclxuXHJcbiAgICB9XSk7IiwiYW5ndWxhci5tb2R1bGUoJ29yZGVyJylcclxuICAuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCBmdW5jdGlvbigkc3RhdGVQcm92aWRlcikge1xyXG5cclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgIC5zdGF0ZSgnb3JkZXJQYW5lbCcsIHtcclxuICAgICAgICB1cmw6ICcvb3JkZXJzJyxcclxuICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgJ3ByaXZhdGUnOiB7XHJcbiAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbW9kdWxlcy9vcmRlci92aWV3cy9vcmRlci1wYW5lbC5jbGllbnQudmlldy5odG1sJyxcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHJlcXVpcmVzTG9naW46IHRydWUsXHJcbiAgICAgICAgICByZXF1aXJlc0FkbWluOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KS5zdGF0ZSgnZWRpdG9yZGVyJywge1xyXG4gICAgICAgIHVybDogJy9vcmRlcnMvOmlkL2VkaXQnLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICdwcml2YXRlJzoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL29yZGVyL3ZpZXdzL2VkaXQtb3JkZXIuY2xpZW50LnZpZXcuaHRtbCcsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgIHJlcXVpcmVzTG9naW46IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pLnN0YXRlKCdvcmRlckRldGFpbCcsIHtcclxuICAgICAgICB1cmw6ICcvb3JkZXJzLzppZCcsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgJ3ByaXZhdGUnOiB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvb3JkZXIvdmlld3Mvb3JkZXItZGV0YWlsLmNsaWVudC52aWV3Lmh0bWwnLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICByZXF1aXJlc0xvZ2luOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XSk7IiwiLy9BcnRpY2xlcyBzZXJ2aWNlIHVzZWQgZm9yIGNvbW11bmljYXRpbmcgd2l0aCB0aGUgYXJ0aWNsZXMgUkVTVCBlbmRwb2ludHNcclxuYW5ndWxhci5tb2R1bGUoJ29yZGVyJykuZmFjdG9yeSgnT3JkZXJzJywgWyckcmVzb3VyY2UnLCAnJGh0dHAnLCBmdW5jdGlvbigkcmVzb3VyY2UsICRodHRwKSB7XHJcblxyXG4gIHZhciBhcGkgPSAkcmVzb3VyY2UoJ2FwaS9vcmRlcnMvOmlkJywge1xyXG4gICAgaWQ6ICdAX2lkJ1xyXG4gIH0sIHtcclxuICAgIHVwZGF0ZToge1xyXG4gICAgICBtZXRob2Q6ICdQVVQnXHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHZhciBzZWFyY2ggPSAkcmVzb3VyY2UoJ2FwaS9vcmRlcnMvOmlkL3NlYXJjaC86bnVtYmVyLzpsYXN0TmFtZScsIHtcclxuICAgIGlkOiAnQF9pZCcsXHJcbiAgICBudW1iZXI6ICdudW1iZXInLFxyXG4gICAgbGFzdE5hbWU6ICdsYXN0TmFtZSdcclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gZmluZE9yZGVycyh5ZWFyLCBzdGFydE1vbnRoLCBlbmRNb250aCkge1xyXG4gICAgdmFyIHJlcSA9IHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgdXJsOiAnYXBpL29yZGVycy92aWV3b3JkZXJzLycgKyB5ZWFyICsgJy9tb250aC8nICsgc3RhcnRNb250aCArICcvJyArIGVuZE1vbnRoLFxyXG4gICAgfVxyXG4gICAgcmV0dXJuICRodHRwKHJlcSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgYXBpOiBhcGksXHJcbiAgICBzZWFyY2g6IHNlYXJjaCxcclxuICAgIGZpbmRPcmRlcnM6IGZpbmRPcmRlcnNcclxuICB9O1xyXG59XSk7IiwiYW5ndWxhci5tb2R1bGUoJ3VzZXInKVxyXG4gICAgLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJ2p3dEludGVyY2VwdG9yUHJvdmlkZXInLCAnJGh0dHBQcm92aWRlcicsIGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlciwgand0SW50ZXJjZXB0b3JQcm92aWRlciwgJGh0dHBQcm92aWRlcikge1xyXG5cclxuICAgICAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgICAgICAuc3RhdGUoJ3NpZ251cCcsIHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zaWdudXAnLFxyXG4gICAgICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAncHVibGljJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvdXNlci92aWV3cy9zaWdudXAuY2xpZW50LnZpZXcuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlc0xvZ2luOiBmYWxzZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5zdGF0ZSgnc2lnbmluJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvc2lnbmluJyxcclxuICAgICAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgICAgICdwdWJsaWMnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3VzZXIvdmlld3Mvc2lnbmluLmNsaWVudC52aWV3Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlc0xvZ2luOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuc3RhdGUoJ3VzZXJMaXN0Jywge1xyXG4gICAgICAgICAgICB1cmw6ICcvdXNlcnMnLFxyXG4gICAgICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICAgICAgJ3ByaXZhdGUnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdtb2R1bGVzL3VzZXIvdmlld3MvdXNlci1saXN0LmNsaWVudC52aWV3Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvdXNlci92aWV3cy91c2VyLWxpc3QuY2xpZW50LnZpZXcuaHRtbCcsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVzTG9naW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlc0FkbWluOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5zdGF0ZSgnZWRpdFVzZXInLCB7XHJcbiAgICAgICAgICAgIHVybDogJy91c2Vycy86aWQvZWRpdCcsXHJcbiAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAncHJpdmF0ZSc6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ21vZHVsZXMvdXNlci92aWV3cy91c2VyLWVkaXQuY2xpZW50LnZpZXcuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVzTG9naW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlc0FkbWluOiB0cnVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8vZ2V0IHRva2VuIHRvIGxvY2FsIHN0b3JhZ2UgYW5kIHNldCBvbiB0aGUgaGVhZGVyc1xyXG4gICAgICAgIGp3dEludGVyY2VwdG9yUHJvdmlkZXIudG9rZW5HZXR0ZXIgPSBbJ2p3dEhlbHBlcicsICckaHR0cCcsICdzdG9yZScsICckc3RhdGUnLCBmdW5jdGlvbiAoand0SGVscGVyLCAkaHR0cCwgc3RvcmUsICRzdGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgaWRUb2tlbiA9IHN0b3JlLmdldCgnand0Jyk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoand0SGVscGVyLmlzVG9rZW5FeHBpcmVkKGlkVG9rZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHByb21pc2Ugb2YgYSBKV1QgaWRfdG9rZW5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vc2t5bmV0d2ViLmNvbS5hci9hcGkvdXNlcnMvcmVmcmVzaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgbWFrZXMgaXQgc28gdGhhdCB0aGlzIHJlcXVlc3QgZG9lc24ndCBzZW5kIHRoZSBKV1RcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2tpcEF1dGhvcml6YXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogaWRUb2tlblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkX3Rva2VuID0gcmVzcG9uc2UuZGF0YS50b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuc2V0KCdqd3QnLCBpZF90b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZF90b2tlbjtcclxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLnJlbW92ZSgnand0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnc2lnbmluJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlkVG9rZW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgc3RvcmUucmVtb3ZlKCdqd3QnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1dO1xyXG4gICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ2p3dEludGVyY2VwdG9yJyk7XHJcblxyXG5cclxuICAgIH1dKVxyXG4gICAgLnJ1bihbJyRyb290U2NvcGUnLCAnJHdpbmRvdycsICdzdG9yZScsICckbG9jYXRpb24nLCAnVXNlclNlcnYnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHdpbmRvdywgc3RvcmUsICRsb2NhdGlvbiwgVXNlclNlcnYpIHtcclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCBmdW5jdGlvbiAoZSwgdG8pIHtcclxuICAgICAgICAgICAgaWYgKHRvLmRhdGEgJiYgdG8uZGF0YS5yZXF1aXJlc0xvZ2luKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JlLmdldCgnand0JykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL2UucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGxvY2F0aW9uLnBhdGgoJy9zaWduaW4nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodG8uZGF0YS5yZXF1aXJlc0FkbWluICYmICFVc2VyU2Vydi5pc0FkbWluKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRsb2NhdGlvbi5wYXRoKCcvZGFzaGJvYXJkJykucmVwbGFjZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfV0pOyIsImFuZ3VsYXIubW9kdWxlKCd1c2VyJylcclxuICAuY29udHJvbGxlcignVXNlckNvbnRyb2xsZXInLCBbJyR3aW5kb3cnLCAnVXNlcnMnLCAnVXNlclNlcnYnLCAnJGh0dHAnLCAnc3RvcmUnLCAnand0SGVscGVyJywgJyRzdGF0ZVBhcmFtcycsICckc3RhdGUnLCBmdW5jdGlvbigkd2luZG93LCBVc2VycywgVXNlclNlcnYsICRodHRwLCBzdG9yZSwgand0SGVscGVyLCAkc3RhdGVQYXJhbXMsICRzdGF0ZSkge1xyXG5cclxuICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICB2bS51c2VyID0ge307XHJcbiAgICB2bS5lcnJvckluZm8gPSB7fTtcclxuXHJcbiAgICB2bS5wdWJsaWNTaWdudXAgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgIHZhciBuZXdVc2VyID0gbmV3IFVzZXJzLmFwaSh2bS51c2VyKTtcclxuXHJcbiAgICAgIG5ld1VzZXIuJHNhdmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBzdG9yZS5zZXQoJ2p3dCcsIHJlc3BvbnNlLnRva2VuKTtcclxuICAgICAgICAkc3RhdGUuZ28oJ2Rhc2hib2FyZCcpO1xyXG4gICAgICB9LCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICB2bS5lcnJvckluZm8gPSBlcnIuZGF0YTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLnNpZ251cCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgLy92YXIgdXNlclJvbGUgPSAodm0udXNlci5yb2xlKSA/ICdBZG1pbicgOiAnVGVjaCc7XHJcbiAgICAgIC8vIHNldCBjb2RlIGZvciB1c2VyIHJvbGVcclxuICAgICAgaWYodm0udXNlci5yb2xlKSB7XHJcbiAgICAgICAgdm0udXNlci5jb2RlID0gJ3liOWI2MzdpMnYnO1xyXG4gICAgICAgIHZtLnVzZXIucm9sZSA9ICdBZG1pbic7XHJcbiAgICAgIH1lbHNlIHtcclxuICAgICAgICB2bS51c2VyLmNvZGUgPSAnZHc3N3llZTE4dSc7XHJcbiAgICAgICAgdm0udXNlci5yb2xlID0gJ1RlY2gnO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB2YXIgbmV3VXNlciA9IG5ldyBVc2Vycy5hcGkodm0udXNlcik7XHJcblxyXG4gICAgICBuZXdVc2VyLiRzYXZlKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gYWRkIHVzZXIgdG8gdGhlIGxpc3RcclxuICAgICAgICB2bS51c2Vycy5wdXNoKHJlc3BvbnNlLmRhdGEpO1xyXG4gICAgICAgIC8vIHJlc2V0IGZvcm1cclxuICAgICAgICB2bS51c2VyID0ge307XHJcbiAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgIHZtLmVycm9ySW5mbyA9IGVyci5kYXRhO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uc2lnbmluID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciB1c2VyID0gbmV3IFVzZXJzLnNpZ25pbih2bS51c2VyKTtcclxuXHJcbiAgICAgIHVzZXIuJHNhdmUoZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgIHN0b3JlLnNldCgnand0JywgcmVzcG9uc2UudG9rZW4pO1xyXG4gICAgICAgIC8vJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9wYW5lbCMvJztcclxuICAgICAgICAgICRzdGF0ZS5nbygnZGFzaGJvYXJkJyk7XHJcblxyXG4gICAgICB9LCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICB2bS5lcnJvckluZm8gPSBlcnIuZGF0YTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmdldEFsbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBVc2Vycy5hcGkucXVlcnkoZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICB2bS51c2VycyA9IHJlc3BvbnNlLmZpbHRlcihmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICByZXR1cm4gZS5faWQgIT09IHZtLmN1cnJlbnRVc2VyLl9pZDtcclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZtLmdldE9uZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICBVc2Vycy5hcGkuZ2V0KHtcclxuICAgICAgICBpZDogJHN0YXRlUGFyYW1zLmlkXHJcbiAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdm0udXNlciA9IHJlc3BvbnNlO1xyXG4gICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdm0uZ2V0Q3VycmVudFVzZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdm0uY3VycmVudFVzZXIgPSBVc2VyU2Vydi5nZXRDdXJyZW50VXNlckRhdGEoKTtcclxuICAgIH07XHJcblxyXG4gICAgdm0udXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZtLnVzZXIuJHVwZGF0ZShmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICRzdGF0ZS5nbygndXNlckxpc3QnKTtcclxuICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgdm0uZXJyb3JJbmZvID0gZXJyLmRhdGE7XHJcbiAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2bS5yZW1vdmUgPSBmdW5jdGlvbih1c2VyKSB7XHJcbiAgICAgIHZhciBjb25maXJtID0gJHdpbmRvdy5jb25maXJtKCdRdWllcmVzIGVsaW1pbmFyIGVsIHVzdWFyaW8gJyArIHVzZXIuZmlyc3ROYW1lICsgJyAnICsgdXNlci5sYXN0TmFtZSArICcgPycpO1xyXG5cclxuICAgICAgaWYgKGNvbmZpcm0pIHtcclxuICAgICAgICB1c2VyLiRyZW1vdmUoKTtcclxuICAgICAgICB2bS51c2VycyA9IHZtLnVzZXJzLmZpbHRlcihmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICByZXR1cm4gZS5faWQgIT09IHVzZXIuX2lkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFxyXG4gIH1dKTtcclxuXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgndXNlcicpXHJcbiAgLmRpcmVjdGl2ZShcImNvbXBhcmVUb1wiLCBbZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXF1aXJlOiBcIm5nTW9kZWxcIixcclxuICAgICAgc2NvcGU6IHtcclxuICAgICAgICBvdGhlck1vZGVsVmFsdWU6IFwiPWNvbXBhcmVUb1wiXHJcbiAgICAgIH0sXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzLCBuZ01vZGVsKSB7XHJcblxyXG4gICAgICAgIG5nTW9kZWwuJHZhbGlkYXRvcnMuY29tcGFyZVRvID0gZnVuY3Rpb24obW9kZWxWYWx1ZSkge1xyXG4gICAgICAgICAgcmV0dXJuIG1vZGVsVmFsdWUgPT0gc2NvcGUub3RoZXJNb2RlbFZhbHVlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHNjb3BlLiR3YXRjaChcIm90aGVyTW9kZWxWYWx1ZVwiLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIG5nTW9kZWwuJHZhbGlkYXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfV0pO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3VzZXInKVxyXG4gIC5kaXJlY3RpdmUoJ3JlY29yZEF2YWlsYWJpbGl0eVZhbGlkYXRvcicsIFsnJGh0dHAnLCAnVXNlcnMnLCBmdW5jdGlvbigkaHR0cCwgVXNlcnMpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG4gICAgICAgIC8vdmFyIGFwaVVybCA9IGF0dHJzLnJlY29yZEF2YWlsYWJpbGl0eVZhbGlkYXRvcjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0QXNMb2FkaW5nKGJvb2wpIHtcclxuICAgICAgICAgIG5nTW9kZWwuJHNldFZhbGlkaXR5KCdyZWNvcmRMb2FkaW5nJywgIWJvb2wpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0QXNBdmFpbGFibGUoYm9vbCkge1xyXG4gICAgICAgICAgbmdNb2RlbC4kc2V0VmFsaWRpdHkoJ3JlY29yZEF2YWlsYWJsZScsIGJvb2wpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbmdNb2RlbC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgIHNldEFzTG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgIHNldEFzQXZhaWxhYmxlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAvLyB1c2luZyByZXNvdXJjZVxyXG4gICAgICAgICAgdmFyIGRhdGEgPSBVc2Vycy5zZWFyY2guZ2V0KHtcclxuICAgICAgICAgICAgZW1haWw6IHZhbHVlXHJcbiAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuZGF0YSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgIHNldEFzTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICAgICAgc2V0QXNBdmFpbGFibGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1dKTsiLCIvL0FydGljbGVzIHNlcnZpY2UgdXNlZCBmb3IgY29tbXVuaWNhdGluZyB3aXRoIHRoZSBhcnRpY2xlcyBSRVNUIGVuZHBvaW50c1xyXG5hbmd1bGFyLm1vZHVsZSgndXNlcicpLmZhY3RvcnkoJ1VzZXJzJywgWyckcmVzb3VyY2UnLCBmdW5jdGlvbigkcmVzb3VyY2UpIHtcclxuXHJcbiAgICB2YXIgYXBpID0gJHJlc291cmNlKCdhcGkvdXNlcnMvOmlkJywge1xyXG4gICAgICAgIGlkOiAnQF9pZCdcclxuICAgIH0sIHtcclxuICAgICAgICB1cGRhdGU6IHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUFVUJ1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBzaWduaW4gPSAkcmVzb3VyY2UoJ2FwaS91c2Vycy9zaWduaW4nKTtcclxuXHJcbiAgICB2YXIgbG9nb3V0ID0gJHJlc291cmNlKCdhcGkvdXNlcnMvbG9nb3V0LzppZCcsIHtcclxuICAgICAgICBpZDogJ0BfaWQnXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgc2VhcmNoID0gJHJlc291cmNlKCdhcGkvdXNlcnMvc2VhcmNoLzplbWFpbCcsIHtcclxuICAgICAgICBlbWFpbDogJ0BlbWFpbCdcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYXBpOiBhcGksXHJcbiAgICAgICAgc2lnbmluOiBzaWduaW4sXHJcbiAgICAgICAgbG9nb3V0OiBsb2dvdXQsXHJcbiAgICAgICAgc2VhcmNoOiBzZWFyY2hcclxuICAgIH07XHJcbn1cclxuXSk7IiwiYW5ndWxhci5tb2R1bGUoJ21haW4nKVxyXG4gICAgLmRpcmVjdGl2ZSgnbmdFbnRlcicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5iaW5kKFwia2V5ZG93biBrZXlwcmVzc1wiLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGV2YWwoYXR0cnMubmdFbnRlciwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2V2ZW50JzogZXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
